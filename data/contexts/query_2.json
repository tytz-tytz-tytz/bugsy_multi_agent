{
  "query": "связи между блоками рассылки",
  "section_candidates": [
    {
      "section_id": "section_ch0437",
      "title": "Упорядочивание сообщений в блоке",
      "text": "Упорядочивание сообщений в блоке\nЕсли блок имеет несколько сообщений, то их можно упорядочить. Чтобы сделать это, необходимо нажать напротив нужного сообщения на , затем в открывшемся меню с помощью пунктов «Переместить наверх» и «Переместить вниз» определить местоположение сообщения (см. Рисунок 72).\nРисунок 72 — Определение местоположения сообщения",
      "score": 0.8405810689926148,
      "node_ids": [
        "chunk_ch0437",
        "chunk_ch0438",
        "chunk_ch0440"
      ]
    },
    {
      "section_id": "section_ch0125",
      "title": "Блоки действий",
      "text": "Блоки действий\nБлок может содержать одно или несколько действий следующих типов:\n1. Отправка сообщения;\n2. Отправка сообщения, содержащего конфиденциальные данные для клиента;\n3. Перевод в канал;\n4. Отмена отправки запланированных сообщений этой рассылки;\n5. Отмена действия кнопок рассылки;\n6. Вызов внешней системы;\n7. Генерация события;\n8. Генерация интента.\nОтправка сообщения\nСообщения могут содержать следующие элементы:\n1. Текст сообщения — текст, который будет отправлен клиенту в мессенджер. Для ввода текста используется поле стандартного блока действий (см. Рисунок 20);\nРисунок 20 — Ввод текстового сообщения для отправки\nПри нажатии на id сообщения (на представленном рисунке это «916») будет открыто окно редактирования, которое удобно использовать для ввода больших текстов рассылок.\n2. Медиа-контент — изображения, видео, аудио и документы, которые могут быть добавлены к сообщению. Поддерживаются наиболее распространенные форматы (см. таблицу 1).\nТаблица 1 — Рекомендуемые форматы файлов и их поддержка в мессенджерах\nТип Форматы Возможность загрузки файлов\nViber ВКонтакте Telegram Facebook* Instagram\n* Изображение JPG JPEG PNG Да Да Да Да Да\nВидео MP4 Да Нет Да Да Да\nАудио MP3 Да Нет Да Да Да\nДокумент PDF DOC(X) XLS(X) TXT Да Да Да Да Да\nВажно!\nСписок рекомендованных форматов, указанный в таблице 1, не является исчерпывающим. У каждого мессенджера есть свой список, который со временем может изменяться. Кроме того, необходимо учитывать, что мессенджеры имеют свои особенности отображения медиа-контента (например, Viber в некоторых случаях не позволяет просматривать изображения в мессенджере).\nОтправка возможна для всех видов контента. При этом, для всех видов контента, кроме изображений, отправляется только ссылка на него. Соответственно, клиент не сможет просматривать аудио, видео или документ прямо в мессенджере (для этого нужно будет воспользоваться браузером или другим приложением.\n19 В таблице приведены наиболее универсальные форматы, подходящие для отправки клиенту в большинство мессенджеров. Перед запуском рассылки для клиентов необходимо предварительно тестировать рассылки на всех мессенджерах.\nДополнительно нужно учитывать, что для некоторых мессенджеров важно, чтобы истинный формат файла соответствовал его расширению (т. е. чтобы изображение image.png действительно имело содержимое, предусмотренное форматом PNG, а не, например, данные в формате JPEG).\nДля добавления медиа-контента необходимо в блоке действий нажать на кнопку и в раскрывшемся меню выбрать пункт «Добавить медиа» (см. Рисунок 21).\nРисунок 21 — Переход к добавлению медиа-контента\nЗатем нужно задать тип медиа-контента и ввести ссылку (URL) на него, либо загрузить\nс компьютера при помощи кнопки (см. Рисунок 22).\nРисунок 22 — Добавление медиа-контента\n3. Медиа группа — изображения и видео, которые могут быть добавлены к сообщению группой.\nВ отличии от предыдущего пункта, медиа группа позволяет отправлять клиенту заранее не определенное количество изображений и видео. Это удобно, например, для информирования клиентов о результате проведенных работ, когда одному\n20 клиенту нужно отправить 10 фотографий, а другому 15. С помощью медиа групп это можно сделать одной рассылкой\n.\nВторое отличие от одиночных медиа состоит в том, что с медиа группа отправляются клиенту одним сообщением\n, тогда как одиночные медиа отправляются каждое в отдельном сообщении.\nВ группах могут отправляться только изображения и видео, документы и аудио отправляться не могут.\nДля добавления группы необходимо в блоке действий нажать на кнопку и в раскрывшемся меню выбрать пункт «Добавить медиа группу» (см. Рисунок 23).\nРисунок 23 — Добавление медиа группы\nВ открывшемся окне можно добавлять и редактировать ссылки на файлы, которые будут отправляться вместе с указанным сообщением (Рисунок 24).\nРисунок 24 — Редактор медиа групп\nДля реализации этого сценария необходимо использовать макросы, см. в\nразделе «Использование макросов»\nВозможности просмотра одиночных и групп медиа («карусель», предпросмотр в виде плиток и т.д.) зависят от мессенджера.\n21 В поле URL можно вставить как сам URL изображения, так и макрос (подробнее о макросах в\nразделе «Использование макросов»\n).\nДля загрузки файлов с устройства используется кнопка . Для клонирования\nэлементов – . Для выбора типа файла необходимо нажать на иконку и в появившемся списке выбрать тип: изображение, видео или макрос.\nЗагруженные элементы отображаются справа. В правой области элементы можно как удалять при наведении мышки и нажатии на кнопку корзины, так и перемещать – кликнув мышкой на элемент и перетянуть в нужное место см. Рисунок 25.\nВ левой области также можно перетаскивать элементы и менять их\nпоследовательность. Для этого необходимо кликнуть мышкой на элемент и перетащить его в нужное место.\nРисунок 25 — Взаимодействие с элементами в правой панели\nВажно!\nМаксимальное количество элементов в медиа группе равно 50. К одному текстовому сообщению может быть присоединена только одна медиа группа.\nВо всех полях медиа группы можно использовать\nмакросы\n.\nРассмотрим случай, когда рассылка с медиа группой будет отправляться клиентам по событию.  Ссылки на изображения мы хотим задавать динамически, в аргументах события, чтобы мы могли отправить одному клиенту 11 фотографий, а другому 20 из одной рассылки. Для этого необходимо:\n1.\nСоздать событие\n, у которого будет 30 аргументов (это будет максимальное число изображений в медиа группе в этом примере) (Рисунок 26);\nРисунок 26 — Создание события для отправки изображений в медиа группе\n2. Создать рассылку и настроить ее на\nначало по этому событию\n;\n3. В конструкторе рассылки в блок добавить медиа группу;\n4. В медиа группу добавить то же самое количество URL, что и в аргументах события (см. Рисунок 27);\nРисунок 27 — Использование макросов с изображениями\n5. В поле URL ввести аргументы события в фигурных скобках, указав в каждом поле только один аргумент, тип файла оставить как изображение (см. Рисунок 27);\n6. Сохранить медиа группу.\n23 После этого необходимо\nсгенерировать событие\nи в аргументах события указать ссылки на файлы для отправки клиенту в мессенджер см. Рисунок 28.\nРисунок 28 — Генерация события с аргументами\nЕсли рассылка должна отправлять не только изображения в медиа группе, но и видео, тогда в макросах нужно передавать еще и тип медиа. Для этого в аргументах события необходимо создать в два раза больше аргументов, чтобы для каждого URL передавался еще и тип, например см. Рисунок 29:\nРисунок 29 — Создания аргументов события для медиа группы\nВ настройках медиа группы для каждого URL выбираем тип \"Макрос\" и задаем URL и его тип макросами, как показано на Рисунок 30.\nРисунок 30 — Создания медиа группы с разными типами\nПосле этого необходимо\nсгенерировать событие\nи в аргументах события указать ссылки на файлы и типы для отправки клиенту в мессенджер, например, см. Рисунок 31.\nРисунок 31 — Генерация события для медиа группы с типами медиа\n4. Кнопки-действия — это кнопки, позволяющие выполнять следующие действия:\n• Вызвать другой блок действий;\n• Добавить клиенту теги;\n• Снять теги с клиента;\n• Отписать клиента от рассылок (всех)\n.\nДля добавления кнопки-действия необходимо в блоке действий нажать на кнопку и в раскрывшемся меню выбрать пункт «Добавить кнопку-действие» (см. Рисунок 32).\nДействие эквивалентно тому, что клиент напишет боту команды «стоп рассылки» или «stop subscriptions», см. раздел\nОтписка от рассылок\n.\nРисунок 32 — Переход к добавлению кнопки-действия\nЗатем нужно задать требуемые параметры кнопки и нажать на кнопку «Сохранить» (см. Рисунок 33). Для каждой кнопки можно указать теги, которые будут назначены клиенту (сняты с клиента), подробнее об этом см. в подразделе\nРабота с тегами\n.\nРисунок 33 — Добавление кнопки-действия\nПримечание:\nДлина заголовка кнопки должна быть не более 20 символов.\nДействия в блоке, связанном с кнопкой, всегда выполняются сразу после нажатия кнопки. (см. Рисунок 34). Блок, вызываемый кнопкой-действием, может содержать любое из действий, описанных в разделе\nБлоки действий\n.\nРисунок 34 — Второй блок выполняется сразу при нажатии на кнопку\nНа одну кнопку клиент может нажать только один раз. Повторные нажатия не обрабатываются. Если сценарий рассылки предусматривает возврат к блоку, который клиент уже получал, то на кнопку можно будет нажать еще раз (см. Рисунок 35). В этом примере при нажатии на кнопку «Назад» клиент получит первый блок еще раз и именно в нем можно будет еще раз нажать на кнопку «Подробнее».\nРисунок 35 — Пример возврата\nПри добавлении к сообщению более двух кнопок-действий появляется опция «Разрешить только одно нажатие» (см. Рисунок 36).\nЕсли она установлена, то клиент может нажать только на одну кнопку в этом сообщении. После первого нажатия аналогичные нажатия по другим кнопкам не обрабатываются. Если опция не установлена, то на каждую кнопку в сообщении можно нажать один раз.\nРисунок 36 — В блок добавлено две кнопки-действия\nВажно!\nОписанное выше относится только к кнопкам сообщения, а не блока. В один блок может быть добавлено несколько сообщений, каждое из которых будет содержать по нескольку кнопок. В этом случае при включенной опции «Разрешить только одно нажатие» в каждом сообщении можно будет нажать по одной кнопке.\nВ некоторых мессенджерах текст сообщений с кнопками может обрезаться. Т.е. клиент увидит не весь отправленный ботом текст, а только первые несколько символов. Предупреждение об этом всплывет справа у окна с текстом см. Рисунок 37. Например, в мобильной версии Viber будет отображаться только первые 40 символов сообщения с кнопкой, а в десктопной версии – первые 10.\nРисунок 37 - Текст с кнопкой, который обрежется в некоторых мессенджерах\nЧтобы обойти эту проблему рекомендуем добавлять отдельное сообщение перед сообщением с кнопкой и задавать в нем основной текст, а в сообщении с кнопкой писать что-то короткое см. Рисунок 38.\nРисунок 38 - Добавлено отдельное сообщение\n5. Кнопки-ссылки — кнопки, позволяющие клиенту перейти по заданной ссылке из мессенджера.\nДля добавления кнопки-ссылки необходимо в блоке действий нажать на кнопку и в раскрывшемся меню выбрать пункт «Добавить кнопку-действие» (см. Рисунок 39).\nРисунок 39 — Переход к добавлению кнопки-ссылки\nЗатем необходимо задать название кнопки и ссылку для нее (см. Рисунок 40).\nРисунок 40 — Создание кнопки-ссылки\n29 Ссылка клиенту не отображается. Нажатия на кнопку-ссылку не могут приводить к запуску другого блока или иным действиям, а также никак не учитываются в статистике.\nПримечание:\nКлиент может нажимать на ссылки многократно, описанные выше ограничения по нажатиям на них не действуют.\nОтправка сообщения, содержащего конфиденциальные данные для клиента\nВ общем случае вся переписка клиента с ботом доступна оператору Maxbot. Если бот используется для отправки конфиденциальной информации (например, кодов подтверждения), то такую информацию необходимо скрывать от оператора.\nДля отправки конфиденциальной информации в теле блока с сообщением необходимо использовать тег <security>…</security> (см Рисунок 41). Вставка закрывающего тега обязательна.\nРисунок 41 — Отправка конфиденциальной информации при помощи тега <security></security>\nДанные, заключенные в теге <security>, для оператора заменяются на ***. То, что увидят клиент и оператор при запуске такой рассылки, показано на рисунке ниже:\nРисунок 42 — Отображение содержимого тега <security> для клиента и для оператора\nНа практике использование тега <security> будет сопровождаться использованием\nмакроса\n, т. е. конфиденциальная информация вряд ли будет задаваться в рассылке статически. В этом случае тег <security> нужно использовать следующим образом (см. Рисунок 43), поместив внутрь макрос, который является аргументом события:\nРисунок 43 — Использование значения макроса в качестве конфиденциальной информации\nПеревод в канал\nДействие перевода в канал выполняется сразу, если диалог у клиента закрыт или диалог свободный\nили иное на задано в настройках действия (см. далее). При наличии открытого диалога перевод выполнен не будет, чтобы не помешать текущему общению клиента с оператором. Перевод будет отложен до тех пор, пока диалог у клиента не будет закрыт или не будут выполнены условия, заданные в настройках действия.\nДля добавления действия перевода в канал нужно нажать на кнопку и в раскрывшемся меню выбрать пункт «Действие», после чего выбрать «Перевести в канал» (см. Рисунок 44):\nРисунок 44 — Выбор действия\nЗатем в открывшемся окне (см. Рисунок 45) необходимо задать параметры для действия перевода в канал.\nВ окне доступны следующие настройки:\n• Выберите канал — канал, в который необходимо перевести клиента;\nСвободный диалог — диалог, у которого канал Bot.\n• Текст при переводе в канал — сообщение, которое будет отправлено клиенту при переводе в канал (если оставить его пустым, то сообщение не будет отправляться);\n• Текст при откладывании перевода в канал — сообщение, которое будет оправлено клиенту, если в момент выполнения действия у него есть открытый диалог и он не свободный (т. е. клиент обсуждает с оператором или ботом какой-то вопрос);\n• Текст перед отложенным переводом в канал — сообщение, которое будет отправлено клиенту при переводе в канал, если он ранее был отложен;\n• Переключатель условия перевода в канал:\n• Перевести сразу (значение по умолчанию) — клиент будет переведен в канал без каких-либо дополнительных условий (кроме наличия открытого/свободного диалога);\n• Перевести после получения сообщения от клиента — клиент будет переведен только после получения от него сообщения и в соответствии с настройками, указанными ниже;\nРисунок 45 — Настройка действия перевода в канал\n• Время ожидания сообщения — время, которое бот ожидает сообщения от клиента для перевода его в канал. Можно установить время не более 2 часов (ограничение введено, чтобы маркетолог не мог надолго «блокировать» клиента: поскольку в момент ожидания не могут выполняться другие рассылки, а также клиенту не смогут отправлять сообщения операторы);\n• Если клиент не ответил за заданное время — действие, которое бот выполнит, не дождавшись сообщения от клиента в течение «времени ожидания сообщения»:\n• «Ничего не делать» — бот не будет предпринимать каких-либо действий; клиент не будет переведен в канал, рассылка при этом продолжится согласно сценарию;\n• «Перевести в канал безусловно» — клиент будет переведен в канал, при этом можно задать другой канал (отличный от исходно заданного);\n• «Отправить сообщение» — клиенту будет отправлено сообщение, заданное в поле ниже; клиент не будет переведен в канал.\nЕсли для рассылки ниже (см. Рисунок 46) задать безусловный перевод клиента в канал по факту нажатия на кнопку «Оставить отзыв», то клиент будет переведен сразу, какого- либо сообщения от него не требуется.\nРисунок 46 — Пример рассылки с переводом в канал\nВ этом случае оператор увидит нового клиента в списке диалогов, но сообщение от клиента будет отсутствовать (см. Рисунок 47).\nРисунок 47 — Клиент переведен в канал без сообщения\n33 Если же в настройках перевода в канал потребовать ввод сообщения от клиента (см. Рисунок 48), то новый диалог появится только после отправки клиентом сообщения.\nРисунок 48 — Ввод условия перевода клиента в канал только при наличии от него сообщения\nВ этом случае оператор уже сразу увидит текст сообщения и не будет тратить время на выяснение причины и содержания обращения (см. Рисунок 49).\nРисунок 49 — Клиент переведен в канал после отправки им сообщения\nОтмена отправки запланированных сообщений\nЭто действие позволяет маркетологу остановить рассылку для клиента при возникновении некоторого события. Например, при нажатии кнопки, при отправке финального сообщения рассылки, при истечении определенного времени.\nДля добавления действия нужно нажать на кнопку и в раскрывшемся меню выбрать пункт «Действие», после чего выбрать «Отключить рассылку запланированных, но еще не отправленных сообщений» (см. Рисунок 50):\nРисунок 50 — Выбор действия\nНа рисунке 51 показан пример такого сценария. Если клиент нажмет на кнопку «Не интересуюсь этим», робот отправит извинительное сообщение и отключит отправку запланированных сообщений. В данном случае это правое нижнее сообщение, которое предполагалось отправить через 5 дней.\nЕсли клиент в течение 5 дней не нажмет эту кнопку, то он получит запланированное сообщение с информацией о продлении акции.\nРисунок 51 — Пример использования события отмены отправки запланированных сообщений\nВажно!\nДействие отмены отправки запланированных сообщений применяется ко всей рассылке для текущего клиента, независимо от того, из какой ветви сценария оно было вызвано.\nОтмена работы уже отправленных в рассылку кнопок\nЭто действие работает аналогично предыдущему, только отменяет не отправку сообщений, а работу кнопок в сообщениях. Вместе с предыдущим действием позволяет полностью деактивировать рассылку для клиентов, у которых они будут выполнены.\nДля добавления действия нужно нажать на кнопку и в раскрывшемся меню выбрать пункт «Действие», после чего выбрать «Отключить работу уже отправленных в рассылку кнопок» (см. Рисунок 52):\nРисунок 52 — Выбор действия\nВ следующем сценарии (см. Рисунок 53) при нажатии на кнопку «Не интересуюсь этим» произойдет не только отмена запланированного сообщения, но и перестанет работать кнопка, отправленная клиенту в первом сообщении.\nРисунок 53 — Использование действия отмены работы уже отправленных в рассылку кнопок\n36 Важно!\nЭто действие отменяет только работу кнопок-действий. Кнопки-ссылки будут всегда доступны, клиенты смогут переходить по ним произвольное число раз.\nДействие отмены работы кнопок применяется ко всей рассылке для текущего клиента, независимо от того, из какой ветви сценария оно было вызвано.\nВызов внешней системы\nДействие «Вызвать внешнюю систему» предназначено для уведомления внешней системы о достижении клиентом того или иного этапа рассылки.\nДля добавления вызова внешней системы нужно нажать на кнопку и в раскрывшемся меню выбрать пункт «Действие», после чего выбрать «Вызвать внешнюю систему» (см. Рисунок 54).\nРисунок 54 — Выбор действия\nДалее необходимо задать параметры запроса к внешней системе. Для примера далее заполнено обращение к CRM компании для того, чтобы отметить интерес клиента к определенной теме в случае нажатия на определенную кнопку (см. Рисунок 55). В дальнейшем в CRM это можно будет использовать для сегментации аудитории.\nПример ниже отражает вариант запроса, при выполнении которого в CRM компании сохраняются данные о том, что клиент с идентификатором 12443 интересуется товарами в категории «наушники» (headphones).\nКроме строковых и числовых параметров также могут использоваться макросы, см. подробнее в разделе\nИспользование макросов\n.\nРисунок 55 — Ввод параметров запроса к внешней системе\nЕсли в блоке есть действие вызова внешней системы, то оно всегда выполняется первым. Если вызов завершается ошибкой (сервер возвращает HTTP-статус, отличный от 200 или не отвечает в течение времени, заданного в поле «Максимальное время выполнения запроса»), то остальные действия блока не выполняются. Если к текущем блоку привязаны последующие блоки (т. е. выполняются после отправки сообщения из этого блока), то они также не будут выполнены.\nПримечание:\nВ текущей версии «Максимальное время выполнения запроса» и все подобные таймауты временно равны 0.5 секунды вне зависимости от заданного значения.\nГенерация события\nБлок этого типа позволяет вызывать события и использовать их для запуска других рассылок из текущей рассылки.\nЕсли клиент по сценарию рассылки перейдет к действию «Сгенерировать событие», то это событие будет сгенерировано либо только для него; если для события задана фиксированная аудитория (см. подробнее в разделе\nОпределение аудитории\n), то событие будет сгенерировано для нее (будет запущена рассылка для множества\n38 клиентов). Это позволит начать одну или несколько других рассылок. Текущая рассылка при этом не будет остановлена, ее сценарий продолжит выполняться.\nРисунок 56 — Выбор действия «Сгенерировать событие\nНапример, есть рассылка, предлагающая клиенту воспользоваться промокодом (см. Рисунок 57). Если клиент нажимает на кнопку, то во втором блоке рассылки генерируется событие «Создание промокода для клиента».\nПримечание:\nСобытие, используемое в сценарии рассылки, должно быть предварительно создано. Подробнее об этом см. в разделе\nИспользование событий\n.\nРисунок 57 — Рассылка, в сценарии которой генерируется событие для клиента\nВ аргументах события, генерируемого для клиента, нужно задать требуемые значения. В нашем случае нужно задать значения для 3-х аргументов (см. Рисунок 58):\n• промокод — строка;\n• размер скидки (%) — число;\n• действует до — строка.\nРисунок 58 — Событие «Создание промокода для клиента» и его аргументы\nПример ввода значений аргументов события показан на рисунке 59.\nПри указании строковых значений необходимо использовать символ кавычек (“); числовые значения и даты задаются без кавычек. Значение аргумента также может быть пустым (не задано).\nПри этом могут быть заданы как статические значения аргументов (в примере выше), так и динамические —\nмакросы\n, уникальные для каждого клиента.\nПереключатель под названием события определяет, для кого будет сгенерировано событие:\n• только для текущего клиента\nили\n• для множества клиентов (для рассылок с фиксированной аудиторией).\nРисунок 59 — Ввод аргументов для события\nТеперь можно создать вторую рассылку, которая будет выполняться при генерации события в первой рассылке. Ниже пример такой рассылки (см. Рисунок 60):\nРисунок 60 — Вторая рассылка, запускаемая по сгенерированному событию и использующая значения аргументов события\nПримечание:\nЕсли рассылка запускается по событию, то его аргументы можно использовать в рассылке как макросы. На рисунке выше во второй рассылке при помощи скобок {{ }} используются значения аргументов сгенерированного события.\nДля данной рассылки нужно выбрать условие «Начинать при возникновении события» и событие «Создание промокода для клиента» (см. Рисунок 61), после чего запустить ее. Рассылка будет «ожидать» выбранного события и выполнится у клиентов, для которых оно наступило.\nРисунок 61 — Определение условий начала второй рассылки\nЕсли в результате выполнения первой рассылки (см. Рисунок 57) клиент нажмет кнопку «Получить промокод», то в результате выполнения второй рассылки будут получены данные промокода (см. Рисунок 62).\nРисунок 62 — После нажатия на кнопку «Получить промокод» для клиента выполнилась вторая рассылка\nГенерация интента\nБлок этого типа позволяет сгенерировать интент (intent) — намерения пользователя, которые могут быть распознаны системой для того, чтобы затем вызвать определенный навык бота.\n42 Для вызова навыков бота необходимо:\n1. Нажать на кнопку и в раскрывшемся меню выбрать пункт «Действие», после чего выбрать «Сгенерировать intent» (см. Рисунок 63).\nРисунок 63 — Выбор действия «Сгенерировать intent»\n2. В настройках действия (см. Рисунок 64) задать название интента и (необязательно) словарь сущностей (entities). Важно, что в поле «Entities» должен быть задан именно словарь в формате JSON (как на рисунке ниже), иначе выполнение сценария рассылки завершится ошибкой.\nВ словаре могут быть использованы как макросы и переменные окружения (в нотации «slots.m.macros_name»), так и статические значения. Этот словарь должен быть валидным jinja-выражением.\nКонстантные выражения также нужно задавать правильно — строки только в кавычках, числа — без, и они не должны оставаться пустыми.\nРисунок 64 — Ввод параметров интента\n43 3. Нажать на кнопку «Сохранить».\nВ результате выполнения этого действия бот сгенерирует указанный интент и передаст slots в качестве параметров. Это позволит запустить нужный навык бота для клиента (например, выбор определенного товара или услуги).\nПримечание:\nЧтобы бот выполнил определенное действие, навыки бота должны быть предварительно настроены.\nВ перспективе это действие должно вытеснить большинство переводов в канал – вместо того, чтобы передавать клиента оператору и занимать его время, рассылка будет вызывать соответствующий навык бота.",
      "score": 0.7218236422538757,
      "node_ids": [
        "chunk_ch0230",
        "chunk_ch0199",
        "chunk_ch0135",
        "chunk_ch0241",
        "chunk_ch0125",
        "chunk_ch0345",
        "chunk_ch0349",
        "chunk_ch0168",
        "chunk_ch0127",
        "chunk_ch0374",
        "chunk_ch0202",
        "chunk_ch0268",
        "chunk_ch0136",
        "chunk_ch0303",
        "chunk_ch0209",
        "chunk_ch0331",
        "chunk_ch0126",
        "chunk_ch0137",
        "chunk_ch0396",
        "chunk_ch0330",
        "chunk_ch0252",
        "chunk_ch0218",
        "chunk_ch0377",
        "chunk_ch0229",
        "chunk_ch0353",
        "chunk_ch0358",
        "chunk_ch0166",
        "chunk_ch0235",
        "chunk_ch0217",
        "chunk_ch0208",
        "chunk_ch0274",
        "chunk_ch0277",
        "chunk_ch0310",
        "chunk_ch0270",
        "chunk_ch0351",
        "chunk_ch0245",
        "chunk_ch0193",
        "chunk_ch0371",
        "chunk_ch0380",
        "chunk_ch0266",
        "chunk_ch0341",
        "chunk_ch0319",
        "chunk_ch0311",
        "chunk_ch0306",
        "chunk_ch0317",
        "chunk_ch0178",
        "chunk_ch0307",
        "chunk_ch0211",
        "chunk_ch0348",
        "chunk_ch0344"
      ]
    },
    {
      "section_id": "section_ch0834",
      "title": "Запуск, перезапуск и остановка рассылок",
      "text": "Запуск, перезапуск и остановка рассылок",
      "score": 0.6513945412635802,
      "node_ids": [
        "chunk_ch0834"
      ]
    },
    {
      "section_id": "section_ch0835",
      "title": "Возможные состояния рассылки",
      "text": "Возможные состояния рассылки\nЛюбая рассылка может находиться в одном из 4-й состояний:\n• «Не запущена» — состояние рассылки с момента создания и до первого запуска. В этом состоянии пользователь (маркетолог) разрабатывает сценарий рассылки, задает основные настройки и аудиторию.\n• «Включена в активном режиме» — в это состояние рассылка переходит поле запуска. В зависимости от настроек условий начала рассылки она начнет выполняться либо сразу, либо при появлении события или тега у клиента, либо при получении ключевого слова от клиента в мессенджере.\n• «Включена в пассивном режиме» — в этом состоянии выполняются сценарии рассылок, начавшиеся в активном режиме, но не запускаются новые.\nЕсли рассылка для фиксированной аудитории началась не для всех клиентов, то продолжаться она будет только для тех, для кого началась, а для оставшихся она уже не начнется.\nЕсли рассылка настроена на начало по событию, при выставлении тега клиенту или при получении ключевого слова, то начавшиеся ранее (в активном режиме) сценарии будут продолжать выполняться. Но при появлении новых событий или выставлении тегов или получении ключевых слов рассылка начинаться не будет. Это состояние нужно для того, чтобы дать отработать рассылке для клиентов, для которых она уже началась, но не порождать новые запуски.\n• «Отключена» — в этом состоянии рассылка не начинается для новых клиентов и не продолжается для тех, для кого она была начата ранее. Иными словами, клиенты не получают новые сообщения рассылки, а нажатия на кнопки в ранее полученных сообщениях не обрабатываются. Это состояние нужно для полного прекращения рассылки.\nПредполагается, что основные настройки рассылки маркетолог должен выполнять в состоянии «Не запущена», в котором допускается изменение любых опций. После запуска рассылки изменение некоторых настроек становится невозможным (см. таблицу 6).\nТаблица 6 — Возможности внесения изменений в рассылку в зависимости от ее состояния\nСостояние Иконка Изменение сценария Изменение условий начала Изменение аудитории Изменение расширенных настроек\nНе запущена + + + +\nВключена в активном режиме + — — +\n73 Состояние Иконка Изменение сценария Изменение условий начала Изменение аудитории Изменение расширенных настроек\nВключена в пассивном режиме + — — +\nОтключена + — — +\nНапример, если рассылка включена в активном или пассивном режимах, то изменение условий начала (см. Рисунок 96) или аудитории (см. Рисунок 97) будет невозможно.\nРисунок 96 — Невозможно изменить условия начала для включенной в активном/пассивном режиме рассылки\nРисунок 97 — Невозможно изменить аудиторию для включенной в активном/пассивном режиме рассылки\nМожно также заметить, что в состоянии «Отключена» можно изменять сценарий и настройки рассылки. Тем не менее, эти изменения не оказывают никакого воздействия на клиентов, которым эта рассылка была отправлена ранее, т. к. действие рассылки в состоянии «Отключена» полностью прекращено.",
      "score": 0.5999563312530517,
      "node_ids": [
        "chunk_ch0835"
      ]
    },
    {
      "section_id": "section_ch2037",
      "title": "Термины и определения",
      "text": "Термины и определения\nАудитория рассылки – множество клиентов, для которых бот выполняет сценарий рассылки. В некоторых случаях клиенты могут не получить рассылку, например, если они отписались от рассылок или от бота в своем мессенджере. Диалог – Совокупность сообщений между компанией (ее операторами и ботами) и клиентом, относящаяся к решению проблемы по его обращению.\nДиплинк – Специальным образом сформированная ссылка, позволяющая передавать от клиента боту произвольный набор параметров.\nЗапуск рассылки (launch) – Сущность в консоли маркетолога, создаваемая в момент запуска рассылки. Каждая рассылка может быть выполнена произвольное количество раз и с различными настройками; для каждого случая будет создан отдельный запуск (launch). Канал – контейнер для обработки обращений клиентов и рассылок по определенной теме или иным характеристикам.\nКлиент – заказчик, покупатель или приобретатель услуг, обратившийся в компанию при помощи одного из мессенджеров.\nКомпания – организация, зарегистрированная в Maxbot и использующая бота для коммуникации с клиентами.\nМессенджер – одна из возможных платформ коммуникации с клиентом:\n• Viber;\n• Telegram;\n• ВКонтакте;\n• Facebook*;\n• Instagram*.\nКонсоль управления (Studio) – интерфейс Maxbot, предназначенный для настройки перечня ботов и их навыков, каналов, операторов и маркетологов.\nРассылка – совокупность сценария, аудитории и условий начала рассылки. Сценарий рассылки – набор действий, выполняемых при проведении рассылки для каждого клиента. Например, отправка ему сообщений и изображений через заданный промежуток времени. Условия начала рассылки – условия, при которых сценарий рассылки запускается для каждого из клиентов в аудитории рассылки. Например, наступление определенного времени, установка тега для клиента или возникновение внешнего события (клиент посетил сайт, оплатил заказ). jinja- выражение – регулярное выражение шаблонизатора для языка программирования Python.\nSMS- провайдер – организация, обеспечивающая отправку коротких сообщений (SMS). Она предоставляет доступ к SMS-шлюзу, при помощи\n168 которого Maxbot отправляет SMS в центр отправки сообщений мобильного оператора.",
      "score": 0.574634666442871,
      "node_ids": [
        "chunk_ch2050",
        "chunk_ch2043",
        "chunk_ch2038",
        "chunk_ch2052"
      ]
    },
    {
      "section_id": "section_ch0855",
      "title": "Запуск рассылки",
      "text": "Запуск рассылки\nДля запуска рассылки необходимо вызвать меню нажатием на иконку (в списке рассылок или в окне просмотра рассылки).\nРисунок 98 — Запуск рассылки\nДля рассылок с фиксированной аудиторией (не по событию) возможен только один запуск рассылки. После того, как рассылка будет запущена и начнется для всех клиентов, она перейдет в пассивный режим. Начать ее заново (перевести в активный режим) нельзя: при попытке выполнить такую операцию бот увидит, что рассылка уже началась для всей аудитории, необработанных клиентов нет, и переведет ее опять в пассивный режим.\nРассылки, начинающиеся по событию, по тегу или по ключевым словам, можно переводить в активный режим и из него во все состояния кроме «Не запущена» произвольное количество раз.",
      "score": 0.5154793834686279,
      "node_ids": [
        "chunk_ch0855"
      ]
    }
  ]
}