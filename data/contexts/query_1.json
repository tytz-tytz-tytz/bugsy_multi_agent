{
  "query": "редактирование существующего события",
  "section_candidates": [
    {
      "section_id": "section_ch1080",
      "title": "Редактирование событий",
      "text": "Редактирование событий\nПосле создания пользовательского события маркетолог может произвольно редактировать все доступные поля и удалить его.\nЕсли хотя бы одна рассылка настроена на старт по данному событию, то его удаление запрещено, редактирование названия и идентификатора рассылки разрешено. Редактирование и удаление аргументов события ограничено созданными в рассылке макросами. Если аргумент события не используется в рассылке, то его можно удалять и изменять. Если используется, то доступно только изменение названия аргумента.\nЕсли хотя бы одна из рассылок, настроенных на старт по данному событию, запущена, то редактирование всех полей события и его аргументов запрещено.",
      "score": 0.7241606092453002,
      "node_ids": [
        "chunk_ch1080",
        "chunk_ch1083",
        "chunk_ch1082"
      ]
    },
    {
      "section_id": "section_ch0867",
      "title": "Редактирование сценария рассылки без ее остановки",
      "text": "Редактирование сценария рассылки без ее остановки\nИзменение сценария запущенной рассылки возможно как в активном, так и в пассивном состоянии. При этом изменения применяются не сразу по результатам редактирования маркетологом, а только при нажатии на специальную кнопку в окне просмотра рассылки (см. Рисунок 100). Это сделано для того, чтобы промежуточные версии сценария не выполнялись для клиентов, т. к. его редактирование может занять продолжительное время.\nРисунок 100 — Изменения сценария рассылки без ее остановки\nПри изменении сценария следует помнить, что новый сценарий будет применен не только для новых запусков рассылки, но и для начатых ранее рассылок.",
      "score": 0.7101920938491821,
      "node_ids": [
        "chunk_ch0867",
        "chunk_ch0868",
        "chunk_ch0870",
        "chunk_ch0869"
      ]
    },
    {
      "section_id": "section_ch1055",
      "title": "Использование событий",
      "text": "Использование событий",
      "score": 0.6723762702941893,
      "node_ids": [
        "chunk_ch1055"
      ]
    },
    {
      "section_id": "section_ch1624",
      "title": "Аудит вызовов событий",
      "text": "Аудит вызовов событий\nНа вкладке «События» можно найти информацию о попытках сгенерировать то или иное событие. Поиск возможен по дате события, а также по его характеристикам. (для этого нужно нажать на иконку фильтра, см. Рисунок 180):\nРисунок 180 — Поиск события по его характеристикам\nПеречень доступных фильтров и их описание приведены в таблице 10. Между собой фильтры применяются по условию «И», т. е. возвращаются результаты, удовлетворяющие всем фильтрам.\nТаблица 10 — Описание фильтров для поиска событий\nФильтр Описание\nДата Дата попытки сгенерировать событие. Единственный обязательный фильтр для выполнения поиска.\nНазвание события В этом фильтре может быть указано полное название события или его часть (выполняется поиск заданной подстроки в названии события).\nСписок идентификаторов рассылок Идентификаторы рассылок, которые начаты в результате вызова события. Фильтр применяется по условию «ИЛИ», т. е. возвращаются результаты, удовлетворяющие хотя бы одному из заданных значений.\nСписок launch_result_ids Идентификаторы запусков (launch_customer_ids или sms_launch_customer_ids или delayed_trigger_event_id, или unsubscribed_trigger_event_id), полученные в результате генерирования событий. Фильтр применяется по условию «ИЛИ», т. е. возвращаются результаты, удовлетворяющие хотя бы одному из заданных значений.\nИдентификатор бота В этом фильтре может быть указано полное системное название бота или его часть, т. е. выполняется поиск заданной подстроки.\nИдентификатор клиента Идентификатор клиента, для которого началась рассылка в результате возникновения события.\nИмя клиента Имя клиента, для которого началась рассылка в результате возникновения события.\nНомер телефона Полный номер телефона клиента или его часть, для которого началась рассылка в результате возникновения события. Т.е. выполняется поиск заданной подстроки\nТипы запуска рассылки по событию Позволяет отфильтровать события по «последствиям» запуска. Можно задать одно или несколько значений из:\n• «Ожидание подтверждения телефона» – события, в результате вызова которых началось ожидание подтверждения клиентом номера телефона (случай, когда в результате вызова события возвращается delayed_trigger_event_id).\n• «Ожидание подписки на бота в мессенджере» – события, в результате вызова которых началось ожидание подписки клиента на бота в мессенджере (случай, когда в результате вызова события возвращается unsubscribed_trigger_event_id).\n• «Передано в транспорт мессенджера» – события, в результате вызова которых началось отправка рассылки в мессенджер (случай, когда в результате вызова события возвращается launch_customer_ids).\n138 Фильтр Описание\n• «Передано в SMS-провайдер» – события, в результате вызова которых началось отправка SMS-рассылки (через SMS-провайдер, случай, когда в результате вызова события возвращается sms_launch_customer_ids).\nРезультат вызова события Статус-код запроса вызова события:\n• 200 — запрос выполнен успешно;\n• 40X – различные виды ошибок.\nСписок возможных источников события Один или несколько источников, откуда сгенерировано событие:\n• Рассылка – события, сгенерированные из сценария рассылки (действие «Сгенерировать событие» в конструкторе рассылок);\n• Интерфейс – события, сгенерированные из консоли маркетолога;\n• API – события, сгенерированные путем вызова одного из запросов API;\n• Системное событие – системные события, сгенерированные ботом (в текущей версии Maxbot это «Подтверждение номера телефона» и «Добавление нового клиента»).\nСостояние запусков рассылки для клиента Статус запуска рассылки для клиента:\n• «Готов к отправке» — рассылка готова к началу, но еще не началась;\n• «Рассылка началась успешно»;\n• «Ошибка при запуске рассылки»;\n• «Пропущен, в рассылке нет SMS-блока» — сгенерировано событие для отправки SMS, но в рассылке нет SMS-блока;\n• «Пропущен, входит в аудиторию другой рассылки»;\n• «Клиент отписался от рассылок»;\n• «Клиент не оплачен»;\n• «Клиент уже получал рассылку»;\n• «Рассылка не успела начаться» – рассылка не началась, т. к. ее остановили, не успев начать ее для клиента;\n• «Ошибка при запуске SMS-рассылки»;\n139 Фильтр Описание\n• «Ошибка при вызове внешней системы в SMS-блоке»;\n• «Ошибка при генерации диплинка для SMS-блока» — при отправке SMS-рассылки с лендингом при генерации диплинка возникла ошибка;\n• «Телефон подтвержден до попытки отправить SMS» — клиент подтвердил номер телефона до отправки SMS, отправка будет осуществлена через мессенджер;\n• «Ожидает подписки клиента в мессенджере» — начало рассылки отложено до подписки клиентом на бота в мессенджере;\n• «Ожидает подтверждения номера телефона» — начало рассылки отложено до подтверждения клиентом номера телефона.\nВ результате применения фильтров отображаются записи о попытках сгенерировать события, удовлетворяющие всем заданным условиям.\nЕсть два режима отображения результатов:\n• режим карточек (см. Рисунок 181);\n• режим списка (см. Рисунок 182).\nРисунок 181 — Просмотр найденных событий (режим карточек)\nРисунок 182 — Просмотр найденных событий (режим списка)\nРежимы отличаются только визуально, переключение между ними выполняется при помощи иконки справа от фильтра.\nПри нажатии на ссылку в поле «ID» можно перейти на страницу с детальной информацией о сгенерированном событии. Эта страница разделяется на две части. В верхней части страницы отображается общая информация о сгенерированном событии (см. Рисунок 183):\n• ID — идентификатор записи о генерации события в журнале аудита событий;\n• Источник — источник, откуда пришел запрос на генерацию события. См. «Список возможных источников события» выше;\n• Рассылка — название рассылки, если событие было сгенерировано из сценария рассылки;\n• Дата — дата генерации события;\n• Название события из запроса — название события, как оно было указано в запросе;\n• ID события — идентификатор события в системе;\n• ID клиента — идентификатор клиента, для которого было сгенерировано событие;\n• Мессенджер — мессенджер клиента, для которого было сгенерировано событие;\n• Телефон — телефон клиента, для которого было сгенерировано событие;\n• Тип — тип запроса на генерацию события. Возможные варианты:\n• По идентификатору клиента;\n• По номеру телефона;\n• Для рассылок с фиксированной аудиторией;\n• Запрос — тело запроса на генерацию события. Для просмотра и копирования нужно навести мышью на «глазок»;\n• Статус-код — HTTP status code ответа на запрос генерации события;\n• Ответ — тело ответа на запрос генерации события. Для просмотра и копирования нужно навести мышью на «глазок».\nРисунок 183 — Общая информация о сгенерированном событии\nВ нижней части страницы отображается информация о рассылках, начавшихся в результате возникновения события, либо информация о начавшемся ожидании подтверждения номера телефона или подписки клиента в мессенджере. Информация на странице с деталями события позволяет понять, началась ли рассылка при вызове события, а также ответить на вопросы – если рассылка началась, то какая, и если не началась, то почему. Далее в подразделах приведены примеры вывода такой информации.\nРассылка в мессенджер (одна или несколько) началась сразу после возникновения события\nСведения о начавшихся рассылках в мессенджере содержат (см. Рисунок 184):\n• ID — идентификатор записи о генерации события в журнале аудита событий;\n• Дата — дата генерации события;\n• MID — идентификатор начавшейся рассылки. При нажатии на ссылку можно перейти на страницу с информацией о ходе выполнения рассылки для этого клиента. Подробнее это описано в разделе\nПросмотр хода выполнения рассылок\n;\n• Рассылка — название рассылки, которая началась в результате вызова события. При клике по ссылке можно перейти на страницу редактирования рассылки;\n• Launch — идентификатор запуска рассылки, получаемый при генерации события (в поле launch_customer_ids ответа на запрос генерации события);\n• Запуск, Остановка — даты запуска и остановки рассылки соответственно (в текущей версии Maxbot) не заполняется;\n• Состояние — текущее состояние рассылки;\n• CID — идентификатор клиента, для которого началась рассылка;\n• Статус — состояние запуска рассылки для клиента, см. ранее описание фильтра «Состояние запусков рассылки для клиента»;\n• Попыток — количество попыток начать рассылку;\n• Последняя попытка — дата последней попытки начать рассылку для клиента.\n• Аргументы — аргументы события, переданные при генерации. Для просмотра и копирования нужно навести мышью на «глазок».\nРисунок 184 — Пример вывода информации о рассылках в мессенджер, которые начались сразу после возникновения события\nSMS-рассылка (одна или несколько) началась сразу после возникновения события\nСведения о начавшихся SMS-рассылках практически аналогичны варианту с рассылкой в мессенджер. Дополнительно для SMS-рассылок отображаются следующие данные (см. Рисунок 185):\n• Телефон — телефон, для которого сгенерировано событие;\n• Мессенджеры — список messenger_order, как он был указан при вызове события;\n• Временная зона — значение поля timezone, указанное при вызове события.\nРисунок 185 — Пример вывода информации о SMS-рассылке, которая началась сразу после возникновения события\nЕсли сообщения не приходят, то разобраться в причине можно, изучив ответ от SMS- провайдера. Для этого необходимо нажать на иконку в поле «Ошибка» (если ошибка имеет место), см. рисунок 186:\nРисунок 186 — Просмотр информации об ошибке при отправке SMS-рассылок\nВызов события отложен до подтверждения номера телефона\nСведения о событиях, отложенных до подтверждения номера телефона, практически аналогичны вариантам, описанным ранее. Дополнительно отображаются следующие данные (см. Рисунок 187):\n• TTL — таймаут ожидания подтверждения номера телефона, заданный при вызове события;\n• Истечение — дата, когда истекло ожидание.\nРисунок 187 — Пример вывода информации о событии, отложенном до подтверждения номера телефона\nВызов события отложен до подписки на бота в мессенджере\nСведения о событиях, отложенных до подписки на бота в мессенджера, практически аналогичны вариантам, описанным ранее. Дополнительно отображаются следующие данные (см. Рисунок 188):\n• TTL — таймаут ожидания подписки на бота в мессенджере, заданный при вызове события;\n• Истечение — дата, когда истекло ожидание подписки.\nРисунок 188 — Пример вывода информации о событии, отложенном до подписки на бота в мессенджере",
      "score": 0.6402630305290222,
      "node_ids": [
        "chunk_ch1624",
        "chunk_ch1625",
        "chunk_ch1629",
        "chunk_ch1670",
        "chunk_ch1639",
        "chunk_ch1703",
        "chunk_ch1732",
        "chunk_ch1698",
        "chunk_ch1726",
        "chunk_ch1632",
        "chunk_ch1697",
        "chunk_ch1631",
        "chunk_ch1716",
        "chunk_ch1731",
        "chunk_ch1678",
        "chunk_ch1636",
        "chunk_ch1648",
        "chunk_ch1735",
        "chunk_ch1700",
        "chunk_ch1626",
        "chunk_ch1674",
        "chunk_ch1699",
        "chunk_ch1676",
        "chunk_ch1645",
        "chunk_ch1649",
        "chunk_ch1671",
        "chunk_ch1715",
        "chunk_ch1637",
        "chunk_ch1696",
        "chunk_ch1730",
        "chunk_ch1733",
        "chunk_ch1722",
        "chunk_ch1630",
        "chunk_ch1705"
      ]
    },
    {
      "section_id": "section_ch1737",
      "title": "Аудит запусков рассылок",
      "text": "Аудит запусков рассылок\nВ некоторых случаях исследование проблем удобнее проводить от рассылки, а не от события. Кроме того, не все рассылки начинаются по событию, некоторые начинаются при выставлении тега или в заданное время. В этом случае удобно использовать вкладку «Рассылки». На данной вкладке можно выполнить поиск информации о запусках рассылок по дате, а также по их характеристикам (для этого нужно нажать на иконку фильтра, см. Рисунок 189).\nРисунок 189 — Поиск рассылок по их характеристикам\nПеречень доступных фильтров и их описание приведены в таблице 11. Для поиска необходимо задать хотя бы один из обязательных фильтров – «Идентификатор», «Название рассылки» или «Дата начала рассылки для клиента».\nТаблица 11 — Описание фильтров для поиска рассылок\nФильтр Описание\nИдентификатор Идентификатор рассылки.\nСостояние рассылки Текущее состояние рассылки.\nИмя клиента Часть или полное имя клиента, для которого началась рассылка.\nМессенджер Мессенджер, через который началась рассылка.\nНомер телефона Номер телефона клиента, для которого началась рассылка.\nСостояние запусков рассылки для клиента См. аналогичное поле ранее в таблице 10.\n146 В результате применения фильтров отображаются записи о запусках рассылок, удовлетворяющие всем заданным условиям. Есть два режима отображения результатов:\n• режим карточек (см. Рисунок 190);\n• режим списка (см. Рисунок 191).\nРежимы отличаются только визуально, переключение между ними выполняется при помощи иконки справа от фильтра.\nРисунок 190 — Вывод информации о найденных рассылках (режим карточек)\nРисунок 191 — Вывод информации о найденных рассылках (режим списка)\nИнформационные поля аналогичны тем, что описаны в подразделе\nАудит вызовов событий\n.\nПри нажатии на ссылку в поле «MID» выполняется переход на страницу с информацией о ходе выполнения рассылки для клиента.\nПри нажатии на ссылку в поле «Состояние» выполняется переход на страницу со статистикой по рассылке (см. подробнее в подразделе\nРабота со статистикой\n).",
      "score": 0.6402630305290222,
      "node_ids": [
        "chunk_ch1756",
        "chunk_ch1738",
        "chunk_ch1744",
        "chunk_ch1759",
        "chunk_ch1737",
        "chunk_ch1743",
        "chunk_ch1758",
        "chunk_ch1749",
        "chunk_ch1741",
        "chunk_ch1746",
        "chunk_ch1742"
      ]
    },
    {
      "section_id": "section_ch0871",
      "title": "Изменение условий начала и аудитории для запущенной рассылки",
      "text": "Изменение условий начала и аудитории для запущенной рассылки\nЕсли в запущенной рассылке заданы некорректная аудитория или нежелательные условия начала, то для исправления ситуации нужно выполнить следующие действия:\n1. Перевести рассылку в состояние «Отключена», нажав на иконку и выбрав в раскрывшемся меню пункт «Отключить».\nРисунок 101 — Отключение рассылки\n2. Перейти к списку рассылок.\n3. В списке рассылок клонировать рассылку, нажав на иконку и выбрав в раскрывшемся меню пункт «Клонировать» (см. Рисунок 102).\nРисунок 102 — Клонирование рассылки\n4. Внести изменения в клонированной рассылке (сценарий, условия запуска, аудитория).\n5. Запустить клонированную рассылку.\nВажно!\n1. При клонировании важно не забыть перевести в состояние «Отключена» исходную рассылку, чтобы клиенты не получили обе рассылки.\n2. Необходимо внимательно следить за пересечением клиентов в исходной и клонированной рассылках, чтобы избежать отправки двух рассылок одному клиенту. Для этого в клонированной рассылке можно воспользоваться настройкой\n«Исключить клиентов, добавленных в рассылки».\n3. Если рассылка с фиксированной аудиторией начинается по событию, то после клонирования обе рассылки будут начинаться при генерации одного события. Таким образом, для одного клиента могут «сработать» обе рассылки. Чтобы избежать этого, исходную рассылку нужно перевести в пассивный режим или отключить.",
      "score": 0.5107765889167786,
      "node_ids": [
        "chunk_ch0872",
        "chunk_ch0871",
        "chunk_ch0879",
        "chunk_ch0885"
      ]
    },
    {
      "section_id": "section_ch1103",
      "title": "События, отложенные до подтверждения клиентом номера телефона",
      "text": "События, отложенные до подтверждения клиентом номера телефона\nПри генерации событий описанным выше запросом рассылка для указанного в ней клиента стартует сразу после получения запроса. Если клиента с таким идентификатором не найдено, то рассылка не будет запущена.\nВ некоторых случаях удобно иметь возможность отложить запуск рассылки для клиентов, которые еще не подключились к боту, и, соответственно, не имеют идентификатора. Например, когда компании выгодно подключать клиентов к боту для ведения дальнейшей коммуникации, и клиентам предлагается скидка, но только в том случае если они подключатся к боту и подтвердят в нем свой номер телефона.\nВ этом случае компания может сгенерировать отложенное событие, указав не идентификатор клиента, а его номер телефона. Бот будет ждать заданное время (ttl, англ. time to live; настройка в интерфейсе называется «Время ожидания подтверждения номера телефона» и задается в секундах, см. Рисунок 130), и если клиент за это время подтвердит свой номер телефона, то событие будет сгенерировано и рассылка для него начнется.\nРисунок 130 — Генерация отложенного события подтверждения номера телефона\nЕсли клиент с таким номером телефона уже есть, то он сразу получит рассылку, несмотря на приоритет мессенджеров (например, если по приоритету Facebook* первый, ВКонтакте второй, а Telegram* третий, но клиент не подтвердил номер в Facebook*, то\n97 рассылка уйдет во ВКонтакте. Среди мессенджеров, где телефон подтвержден, приоритет учитывается).\nПримечание:\nСгенерировать отложенное событие также можно при помощи\nAPI-вызова\n, задав ненулевой параметр ttl (см. запрос «Генерация события по номеру телефона» в разделе\nAPI консоли маркетолога\n).",    
      "score": 0.46968006849288935,
      "node_ids": [
        "chunk_ch1111"
      ]
    },
    {
      "section_id": "section_ch1056",
      "title": "Общая информация о событиях",
      "text": "Общая информация о событиях\nСобытия могут являться триггером к началу рассылки для клиента. Это удобно для решения некоторых маркетинговых задач. Например, можно создать событие «Клиент воспользовался услугой» и генерировать его при оплате клиентом услуги. Получив информацию о событии, бот может запустить одну или несколько рассылок этому клиенту: контроль качества через несколько дней, повторное предложение услуги со скидкой через месяц и т. д.\nСобытия делятся на два типа:\n1. Системные:\n• Добавление нового клиента;\n• Подтверждение номера телефона.\n2. Пользовательские.\nСистемные события\nСистемные события генерируются, когда клиент отправляет сообщение боту в первый раз, либо подтверждает номер телефона. Их нельзя удалить или изменить.\nВажно!\nСистемные события срабатывают для всех клиентов, которые подключились к боту или подтвердили номер телефона. При тестировании таких рассылок нужно быть очень\n91 аккуратным и учитывать, что эти события могут происходить одновременно у многих реальных клиентов.\nТестирование таких рассылок лучше производить с использованием отдельного тестового события, и потом только переключать рассылку на начало по системным событиям. Иными словами, аудитория может оказаться шире, чем изначально кажется маркетологу.  И рассылка будет затрагивать всех будущих клиентов, которые подключатся или подтвердят номер телефона. Соответственно, лучше проверить такую рассылку заранее на другом событии и уже потом переключиться на нужное.\nПользовательские события\nПользовательские события могут генерироваться из другой рассылки или с помощью специального вызова API (см. подробнее запросы группы «Генерация событий» в разделе\nAPI консоли маркетолога\n).\nПользовательские события можно создавать и удалять из интерфейса консоли маркетолога (см. Рисунок 123).\nРисунок 123 — Переход к добавлению пользовательского события\nПри создании события задается его идентификатор, имя и аргументы (см. Рисунок 124). Идентификатор события используется при генерации события. Имя используется для отображения события в интерфейсе, например, при выборе события в условиях запуска рассылки.\nРисунок 124 — Ввод аргументов события\nАргументы позволяют передавать дополнительную информацию при генерации события. Например, у системного события «Подтверждение номера телефона» есть аргумент phone_number — номер телефона, который подтвердил клиент.\nПри создании пользовательских событий в них может быть добавлено произвольное число аргументов. Например, для события «Клиент воспользовался услугой» можно добавить аргументы «Дата оказания услуги» и «Мастер, который оказывал услугу». Эти аргументы можно будет использовать в текстах сообщений, кнопках рассылки и других текстовых полях аналогично макросам. Таким образом, можно создавать персонифицированные для каждого клиента рассылки.",
      "score": 0.42574733257293695,
      "node_ids": [
        "chunk_ch1056",
        "chunk_ch1069"
      ]
    }
  ]
}