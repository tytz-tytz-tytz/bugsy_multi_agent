[
  {
    "id": "SCN-001",
    "title": "Вызов блока через кнопку-действие и повторное нажатие при возврате",
    "steps": [
      "Создать рассылку с тремя блоками: A, B, C.",
      "В блоке A добавить сообщение с кнопкой-действием 'Перейти к блоку B'.",
      "В блоке B добавить сообщение с кнопкой-действием 'Вернуться к блоку A'.",
      "В блоке C добавить сообщение без кнопок.",
      "Запустить рассылку для тестового клиента.",
      "Клиент получает блок A. Нажать кнопку 'Перейти к блоку B'.",
      "После получения блока B, нажать кнопку 'Вернуться к блоку A'."
    ],
    "expected_result": "После нажатия кнопки 'Перейти к блоку B' в блоке A, система немедленно начинает выполнение блока B. После нажатия кнопки 'Вернуться к блоку A' в блоке B, клиент снова получает блок A, и кнопка 'Перейти к блоку B' в нем активна и доступна для повторного нажатия.",
    "attributes_covered": [
      "EVT-001",
      "EVT-003"
    ]
  },
  {
    "id": "SCN-002",
    "title": "Ограничение одного нажатия и глобальная отмена",
    "steps": [
      "Создать рассылку с блоком A.",
      "В блоке A добавить сообщение с тремя кнопками-действиями: 'Перейти к блоку B', 'Перейти к блоку C', 'Отменить отправку'.",
      "Включить опцию 'Разрешить только одно нажатие' для сообщения.",
      "Создать блоки B и C с любыми сообщениями.",
      "Запустить рассылку для тестового клиента.",
      "Клиент получает блок A. Нажать кнопку 'Отменить отправку'."
    ],
    "expected_result": "После нажатия кнопки 'Отменить отправку' в блоке A, все запланированные сообщения для клиента в рамках рассылки отменяются, и кнопки во всех блоках (включая оставшиеся две в блоке A) становятся неактивными. Опция 'Разрешить только одно нажатие' обеспечивает, что клиент не может нажать другие кнопки в этом сообщении после первого нажатия.",
    "attributes_covered": [
      "EVT-002",
      "EVT-004"
    ]
  },
  {
    "id": "SCN-003",
    "title": "Влияние состояния рассылки на выполнение блоков",
    "steps": [
      "Создать рассылку с двумя блоками: A и B.",
      "В блоке A добавить сообщение с кнопкой-действием 'Перейти к блоку B'.",
      "Запустить рассылку для тестового клиента.",
      "Клиент получает блок A. Нажать кнопку 'Перейти к блоку B'.",
      "Пока клиент находится в блоке B, перевести рассылку в состояние 'Отключена'.",
      "Проверить, может ли клиент получить новые сообщения или выполнить переходы по кнопкам."
    ],
    "expected_result": "После отключения рассылки клиент, который уже начал сценарий, не получает новые сообщения из блоков, на которые еще не перешел, и не может выполнять переходы по кнопкам-действиям между блоками. Все связи между блоками останавливаются.",
    "attributes_covered": [
      "EVT-005"
    ]
  },
  {
    "id": "SCN-004",
    "title": "Приоритет вызова внешней системы и блокировка при ошибке",
    "steps": [
      "Создать рассылку с блоком A.",
      "В блоке A добавить действия: вызов внешней системы (с настройкой, имитирующей ошибку), затем отправку сообщения с кнопкой-действием 'Перейти к блоку B'.",
      "Создать блок B с любым сообщением.",
      "Запустить рассылку для тестового клиента."
    ],
    "expected_result": "При выполнении блока A сначала предпринимается попытка вызова внешней системы. Поскольку вызов завершается ошибкой, отправка сообщения в блоке A не происходит, кнопка-действие не отображается клиенту, и переход к блоку B не выполняется. Выполнение блока и последующих переходов блокируется.",
    "attributes_covered": [
      "EVT-006"
    ]
  },
  {
    "id": "SCN-005",
    "title": "Независимость порядка сообщений от связей и редактирование сценария в активном режиме",
    "steps": [
      "Создать рассылку с блоками A и B. Запустить её (активный режим).",
      "В блоке A добавить два сообщения: M1 (с кнопкой 'Перейти к B') и M2 (без кнопки).",
      "Изменить порядок сообщений в блоке A, переместив M2 наверх.",
      "В блоке B добавить новое сообщение с кнопкой-действием, вызывающей новый блок C.",
      "Попытаться изменить аудиторию рассылки."
    ],
    "expected_result": "Изменение порядка сообщений в блоке A (M2 отправляется первым, затем M1) не влияет на то, что кнопка в M1 по-прежнему вызывает блок B. В активном режиме можно добавить новый блок C и связать его кнопкой из блока B, но изменение аудитории рассылки должно быть запрещено системой.",
    "attributes_covered": [
      "EVT-007",
      "EVT-008"
    ]
  }
]