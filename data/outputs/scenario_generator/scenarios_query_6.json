[
  {
    "id": "SCN-001",
    "title": "Условная отправка вопроса на основе ответа и проверка порядка",
    "steps": [
      "Создать форму с двумя вопросами: вопрос A (например, 'Оцените услугу' с вариантами 'низкая', 'средняя', 'высокая') и вопрос B (например, 'Уточните причину низкой оценки').",
      "Настроить для вопроса B условие отправки: 'отправить, если ответ на вопрос A равен \"низкая\"'.",
      "Расположить вопрос B в форме после вопроса A.",
      "Запустить форму и ответить на вопрос A значением 'низкая'.",
      "Проверить, отправлен ли вопрос B клиенту.",
      "Запустить форму заново и ответить на вопрос A значением 'высокая'.",
      "Проверить, что вопрос B не отправлен клиенту."
    ],
    "expected_result": "Вопрос B отправляется только при ответе 'низкая' на вопрос A и не отправляется при ответе 'высокая'. Вопрос B расположен после вопроса A, что позволяет проверить условие.",
    "attributes_covered": [
      "EVT-001",
      "EVT-002"
    ]
  },
  {
    "id": "SCN-002",
    "title": "Обработка пропущенного ответа для условия 'Не равно'",
    "steps": [
      "Создать форму с двумя вопросами: вопрос A (например, 'Согласны ли вы?' с вариантами 'Да', 'Нет') и вопрос B (например, 'Почему не согласны?').",
      "Настроить для вопроса B условие отправки: 'отправить, если ответ на вопрос A не равен \"Да\"'.",
      "Расположить вопрос B после вопроса A.",
      "Запустить форму и пропустить вопрос A (не отвечать на него).",
      "Проверить, отправлен ли вопрос B клиенту."
    ],
    "expected_result": "При пропущенном ответе на вопрос A условие 'не равно \"Да\"' срабатывает, и вопрос B отправляется клиенту.",
    "attributes_covered": [
      "EVT-003"
    ]
  },
  {
    "id": "SCN-003",
    "title": "Использование ответов в Jinja-шаблонах и выражениях после заполнения формы",
    "steps": [
      "Создать форму с вопросом, имеющим идентификатор ответа 'customer_feedback' (например, 'Оставьте отзыв').",
      "Настроить шаблон письма, который использует {{ form.customer_feedback }} для подстановки ответа.",
      "Настроить условие в логике бота, использующее выражение 'slots.customer_feedback is not none'.",
      "Запустить форму, ответить на вопрос текстом 'Отличный сервис'.",
      "Проверить, что в сгенерированном письме корректно подставлен текст 'Отличный сервис' через {{ form.customer_feedback }}.",
      "Проверить, что условие 'slots.customer_feedback is not none' оценивается как True после ответа."
    ],
    "expected_result": "Ответ на вопрос доступен в Jinja-шаблоне через {{ form.customer_feedback }} и в Jinja-выражении через slots.customer_feedback, значения корректны.",
    "attributes_covered": [
      "EVT-004",
      "EVT-005",
      "EVT-009"
    ]
  },
  {
    "id": "SCN-004",
    "title": "Обработка неотвеченных вопросов при выходе из формы",
    "steps": [
      "Создать форму с двумя вопросами: вопрос 1 (идентификатор 'answer1') и вопрос 2 (идентификатор 'answer2').",
      "Запустить форму, ответить на вопрос 1, затем выйти из формы до ответа на вопрос 2 (например, по таймауту или действию клиента).",
      "Проверить значение slots.answer2 в состоянии системы после выхода."
    ],
    "expected_result": "Значение slots.answer2 для неотвеченного вопроса 2 равно None после выхода из формы.",
    "attributes_covered": [
      "EVT-006"
    ]
  },
  {
    "id": "SCN-005",
    "title": "Обработка вопроса типа 'Файл' и его использование в параметрах",
    "steps": [
      "Создать форму с вопросом типа 'Файл', идентификатор ответа 'file_answer'.",
      "Запустить форму, загрузить два файла (например, file1.pdf и file2.jpg).",
      "Проверить значение slots.file_answer после загрузки.",
      "Использовать значение {{ slots.file_answer|list|join(', ') if slots.file_answer else '' }} в параметре API (например, в вебхуке).",
      "Проверить, что в параметр передана строка с URL-адресами, разделёнными запятой."
    ],
    "expected_result": "Ответ slots.file_answer является списком URL. При использовании в параметре с Jinja-фильтром он корректно преобразуется в строку URL, разделённых запятой.",
    "attributes_covered": [
      "EVT-007",
      "EVT-008"
    ]
  }
]