[
  {
    "id": "SCN-001",
    "title": "Создание и настройка SMS-провайдера типа SMSC с обязательными полями",
    "steps": [
      "Перейти в раздел настройки SMS-провайдеров в Maxbot.",
      "Нажать 'Создать SMS-провайдер'.",
      "Выбрать тип провайдера 'SMSC'.",
      "Заполнить все обязательные поля: Название, Описание, Логин, Пароль, Отправитель.",
      "Установить флаг 'Использовать по умолчанию' (например, в true).",
      "Нажать 'Сохранить'."
    ],
    "expected_result": "SMS-провайдер типа SMSC успешно создан и отображается в списке провайдеров.",
    "attributes_covered": [
      "EVT-001"
    ]
  },
  {
    "id": "SCN-002",
    "title": "Создание провайдера 'СМС услуги' с корректными данными и проверка особенностей настройки",
    "steps": [
      "Перейти в раздел настройки SMS-провайдеров.",
      "Нажать 'Создать SMS-провайдер'.",
      "Выбрать тип провайдера 'СМС услуги'.",
      "В поле 'Логин' ввести произвольную последовательность символов (например, 'test_login').",
      "В поле 'Пароль' ввести корректный токен из личного кабинета сервиса 'СМС услуги' (раздел API - Рассылка сообщений).",
      "В поле 'Отправитель' выбрать или ввести имя отправителя, зарегистрированное в разделе 'Рассылка СМС' - 'Имена отправителя'.",
      "Заполнить остальные обязательные поля (Название, Описание, флаг).",
      "Нажать 'Сохранить'."
    ],
    "expected_result": "SMS-провайдер 'СМС услуги' успешно создан с использованием токена в качестве пароля и зарегистрированного имени отправителя.",
    "attributes_covered": [
      "EVT-001",
      "EVT-002"
    ]
  },
  {
    "id": "SCN-003",
    "title": "Создание провайдера 'SMS.ru' с api_id и проверка особенностей настройки",
    "steps": [
      "Перейти в раздел настройки SMS-провайдеров.",
      "Нажать 'Создать SMS-провайдер'.",
      "Выбрать тип провайдера 'SMS.ru'.",
      "В поле 'Отправитель' указать зарегистрированное в SMS.ru имя отправителя (например, 'MyCompany') или номер телефона аккаунта.",
      "В поле 'Пароль' ввести корректный api_id из личного кабинета SMS.ru (раздел 'Программистам' - 'Ваш api_id').",
      "Заполнить остальные обязательные поля (Название, Описание, Логин, флаг).",
      "Нажать 'Сохранить'."
    ],
    "expected_result": "SMS-провайдер 'SMS.ru' успешно создан с использованием api_id в качестве пароля и указанного отправителя.",
    "attributes_covered": [
      "EVT-001",
      "EVT-003"
    ]
  },
  {
    "id": "SCN-004",
    "title": "Проверка отправки SMS клиенту с флагом failback_to_sms и подтвержденным номером в мессенджере",
    "steps": [
      "Создать аудиторию клиентов.",
      "Добавить в аудиторию клиента с подтвержденным номером телефона в Telegram и установить флаг failback_to_sms = false.",
      "Создать рассылку с SMS-блоком, используя настроенного SMS-провайдера.",
      "Добавить аудиторию в рассылку.",
      "Запустить рассылку.",
      "Проверить историю сообщений клиента."
    ],
    "expected_result": "Клиент получает сообщение в Telegram, SMS не отправляется.",
    "attributes_covered": [
      "EVT-004"
    ]
  },
  {
    "id": "SCN-005",
    "title": "Принудительная отправка SMS клиенту с подтвержденным мессенджером через пустой messengers_order",
    "steps": [
      "Создать аудиторию клиентов.",
      "Добавить в аудиторию клиента с подтвержденным номером в WhatsApp.",
      "В настройках аудитории задать пустое поле messengers_order и выставить failback_to_sms = true.",
      "Создать рассылку с SMS-блоком, используя настроенного SMS-провайдера.",
      "Добавить аудиторию в рассылку.",
      "Запустить рассылку.",
      "Проверить историю сообщений клиента."
    ],
    "expected_result": "Клиент получает SMS, сообщение в WhatsApp не отправляется.",
    "attributes_covered": [
      "EVT-005"
    ]
  },
  {
    "id": "SCN-006",
    "title": "Добавление SMS-провайдера в рассылку и создание SMS-блока",
    "steps": [
      "Создать SMS-провайдер (например, типа SMSC).",
      "Создать новую рассылку.",
      "Перейти в раздел 'Условия начала рассылки' -> 'Расширенные настройки'.",
      "Выбрать созданного SMS-провайдера из списка.",
      "Перейти в конструктор рассылки.",
      "Попытаться добавить SMS-блок."
    ],
    "expected_result": "После выбора провайдера в расширенных настройках, в конструкторе рассылки становится доступна опция добавления SMS-блока. SMS-блок успешно добавляется.",
    "attributes_covered": [
      "EVT-006"
    ]
  },
  {
    "id": "SCN-007",
    "title": "Проверка ограничения на один SMS-блок в рассылке и его содержимого",
    "steps": [
      "Создать рассылку с настроенным SMS-провайдером.",
      "В конструкторе рассылки добавить один SMS-блок.",
      "Внутри SMS-блока добавить два текстовых сообщения и настроить ссылку на посадочную страницу.",
      "Попытаться добавить второй SMS-блок в ту же рассылку."
    ],
    "expected_result": "Первый SMS-блок успешно создан с несколькими сообщениями и ссылкой. При попытке добавить второй SMS-блок система выдает ошибку или опция добавления недоступна.",
    "attributes_covered": [
      "EVT-007",
      "EVT-010"
    ]
  },
  {
    "id": "SCN-008",
    "title": "Обработка ошибки внешней системы в SMS-блоке и отсутствие уведомления клиенту",
    "steps": [
      "Создать рассылку с SMS-блоком.",
      "В SMS-блок добавить шаг 'Вызов внешней системы', указав нерабочий или возвращающий ошибку эндпоинт API.",
      "Добавить после шага вызова текстовое SMS-сообщение.",
      "Назначить рассылку аудитории с клиентом, у которого failback_to_sms = true.",
      "Запустить рассылку.",
      "Проверить, получил ли клиент какие-либо сообщения."
    ],
    "expected_result": "При ошибке вызова внешней системы, текстовое SMS-сообщение клиенту не отправляется. Клиент не получает никакого сообщения об ошибке.",
    "attributes_covered": [
      "EVT-008"
    ]
  },
  {
    "id": "SCN-009",
    "title": "Использование переменных профиля в SMS-блоке и проверка ограничений",
    "steps": [
      "Создать рассылку с SMS-блоком.",
      "В тексте SMS-сообщения использовать переменную {{ profile.phone }}.",
      "Попытаться использовать в тексте другую переменную профиля, например {{ profile.name }}.",
      "Назначить рассылку аудитории с клиентом, у которого заполнен номер телефона и имя, и выставлен failback_to_sms = true.",
      "Запустить рассылку.",
      "Проверить отправленное SMS-сообщение."
    ],
    "expected_result": "В отправленном SMS переменная {{ profile.phone }} корректно подставляется номером телефона клиента. Переменная {{ profile.name }} либо не подставляется (остается пустой), либо система выдает ошибку при сохранении/отправке.",
    "attributes_covered": [
      "EVT-009"
    ]
  },
  {
    "id": "SCN-010",
    "title": "Настройка времени жизни ссылки на лендинг в SMS-блоке",
    "steps": [
      "Создать рассылку с SMS-блоком.",
      "В SMS-блоке настроить ссылку на посадочную страницу (лендинг).",
      "В настройках ссылки задать время жизни, например, 1 час.",
      "Сохранить и запустить рассылку для аудитории с клиентом (failback_to_sms = true).",
      "Клиент получает SMS со ссылкой.",
      "Сразу после получения перейти по ссылке - она работает.",
      "Подождать более 1 часа и попытаться перейти по той же ссылке."
    ],
    "expected_result": "Сразу после получения ссылка ведет на лендинг. Через время, превышающее заданное время жизни (1 час), ссылка становится недействительной (например, возвращает ошибку 404 или страницу с истекшим сроком).",
    "attributes_covered": [
      "EVT-010",
      "EVT-011"
    ]
  },
  {
    "id": "SCN-011",
    "title": "Проверка разделения длинного сообщения на несколько SMS провайдером",
    "steps": [
      "Создать рассылку с SMS-блоком.",
      "В SMS-блок добавить одно текстовое сообщение, длина которого превышает лимит одного SMS (например, 500 символов).",
      "Настроить рассылку на использование конкретного SMS-провайдера (например, SMSC).",
      "Запустить рассылку для аудитории с клиентом (failback_to_sms = true).",
      "Проверить отчет провайдера или историю отправки."
    ],
    "expected_result": "Длинное сообщение отправлено клиенту разделенным на несколько SMS (например, на две части). Тарификация в отчете провайдера происходит за количество отправленных частей (например, за 2 SMS).",
    "attributes_covered": [
      "EVT-012"
    ]
  },
  {
    "id": "SCN-012",
    "title": "Негативные сценарии создания SMS-провайдера",
    "steps": [
      "Перейти в раздел создания SMS-провайдера.",
      "Выбрать тип провайдера 'SMSC'.",
      "Оставить поле 'Логин' пустым, заполнив все остальные обязательные поля.",
      "Попытаться сохранить.",
      "Выбрать тип провайдера 'СМС услуги'.",
      "В поле 'Пароль' ввести обычный пароль (не токен из ЛК), заполнив остальные поля корректно.",
      "Попытаться сохранить.",
      "Выбрать тип провайдера 'SMS.ru'.",
      "В поле 'Пароль' ввести обычный пароль от аккаунта (не api_id), заполнив остальные поля корректно.",
      "Попытаться сохранить."
    ],
    "expected_result": "Во всех трех случаях система не позволяет сохранить провайдер и выдает ошибки валидации: для пустого логина, для некорректного пароля (не токена) 'СМС услуги', для некорректного пароля (не api_id) 'SMS.ru'.",
    "attributes_covered": [
      "EVT-001",
      "EVT-002",
      "EVT-003"
    ]
  }
]