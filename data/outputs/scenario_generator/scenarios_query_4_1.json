[
  {
    "id": "SCN-001",
    "title": "Создание и тестирование рассылки с фиксированной аудиторией",
    "steps": [
      "В интерфейсе создать новую рассылку.",
      "В разделе определения аудитории выбрать тип 'Фиксированная аудитория'.",
      "Загрузить JSON-файл с корректной структурой, содержащей поля 'phone' и 'messengers_order' для 10 клиентов.",
      "Задать условие начала рассылки 'Сразу'.",
      "Сохранить и запустить рассылку.",
      "После запуска попытаться перейти в настройки аудитории и отредактировать список клиентов.",
      "После завершения рассылки попытаться нажать кнопку 'Запустить' повторно."
    ],
    "expected_result": "Загрузка JSON-файла проходит успешно. После запуска рассылки редактирование списка фиксированной аудитории невозможно (поля заблокированы или раздел недоступен). После завершения рассылки кнопка 'Запустить' неактивна или скрыта, повторный запуск без клонирования невозможен.",
    "attributes_covered": [
      "AUD-001",
      "AUD-003",
      "DAT-001"
    ]
  },
  {
    "id": "SCN-002",
    "title": "Создание и управление пользовательским событием для рассылки",
    "steps": [
      "В разделе событий создать новое пользовательское событие с идентификатором 'test_purchase', именем 'Покупка' и добавить аргумент 'amount' типа 'число'.",
      "Создать новую рассылку, в условиях начала выбрать событие 'Покупка' (test_purchase).",
      "Сохранить рассылку (не запускать).",
      "Вернуться в раздел событий и попытаться удалить событие 'test_purchase'.",
      "Попытаться отредактировать событие 'test_purchase': изменить его имя и идентификатор.",
      "Запустить созданную рассылку.",
      "После запуска рассылки снова попытаться отредактировать событие 'test_purchase', изменив аргументы."
    ],
    "expected_result": "Событие создается с указанными полями и аргументом. При попытке удалить событие, используемое в рассылке, отображается ошибка 'Событие используется в рассылке'. Редактирование имени и идентификатора события до запуска рассылки разрешено. После запуска рассылки все поля события (включая аргументы) становятся недоступны для редактирования.",
    "attributes_covered": [
      "EVT-002",
      "EVT-004",
      "EVT-005"
    ]
  },
  {
    "id": "SCN-003",
    "title": "Тестирование генерации события и переход в отладку",
    "steps": [
      "В разделе событий выбрать существующее пользовательское событие с аргументами (например, созданное в SCN-002).",
      "Нажать кнопку 'Сгенерировать событие' для тестирования.",
      "В открывшейся форме ввести корректные значения для аргументов (например, для аргумента 'amount' типа число ввести 1500).",
      "Нажать кнопку подтверждения генерации.",
      "Проверить, куда перенаправил интерфейс после генерации."
    ],
    "expected_result": "Система принимает запрос с корректными типами аргументов. После генерации интерфейс автоматически открывает раздел 'Отладка', где отфильтрованы записи по полученному launch_result_id.",
    "attributes_covered": [
      "EVT-003",
      "UI-001"
    ]
  },
  {
    "id": "SCN-004",
    "title": "Проверка системных событий и условий начала рассылки",
    "steps": [
      "В разделе событий просмотреть список событий.",
      "Найти системное событие (например, 'добавление клиента').",
      "Попытаться нажать на кнопки редактирования или удаления для этого системного события.",
      "Создать новую рассылку.",
      "Не задавать никакое условие начала (оставить невыбранным 'Сразу', 'По времени', 'По событию').",
      "Попытаться нажать кнопку 'Сохранить и запустить'."
    ],
    "expected_result": "В списке событий системные события отображаются без активных кнопок редактирования или удаления. При создании рассылки без выбранного условия начала кнопка 'Сохранить и запустить' неактивна (запуск невозможен).",
    "attributes_covered": [
      "EVT-001",
      "NEG-001"
    ]
  },
  {
    "id": "SCN-005",
    "title": "Работа с динамической аудиторией и отложенными событиями",
    "steps": [
      "Создать новую рассылку.",
      "В разделе определения аудитории выбрать тип 'Динамическая аудитория' и настроить её на событие 'добавление в корзину' (предполагается, что такое пользовательское событие существует).",
      "Проверить наличие полей для ограничения размера аудитории при настройке.",
      "В условиях начала выбрать 'По событию' и указать событие 'подтверждение номера' (системное).",
      "В настройках события установить параметр ttl (например, 3600 секунд).",
      "Сохранить и запустить рассылку.",
      "Через API сгенерировать событие 'подтверждение номера' для клиента с неподтвержденным номером, указав ttl=3600."
    ],
    "expected_result": "При настройке динамической аудитории нет полей для указания максимального количества клиентов. Рассылка запускается. При генерации отложенного события для клиента с неподтвержденным номером рассылка ожидает подтверждения в течение заданного ttl, а не начинается немедленно.",
    "attributes_covered": [
      "AUD-002",
      "EVT-006"
    ]
  },
  {
    "id": "SCN-006",
    "title": "Отправка рассылки по номеру телефона и негативное тестирование аргументов",
    "steps": [
      "Создать новую рассылку, предназначенную для отправки по SMS (с SMS-блоком и установленным флажком).",
      "В интерфейсе выбрать опцию отправки по номеру телефона.",
      "Ввести номер телефона, который не подтвержден в системе.",
      "Установить время ожидания 0.",
      "Попытаться отправить рассылку.",
      "Вернуться в раздел событий и для существующего события с аргументом типа 'число' сгенерировать тестовое событие, передав в аргумент строковое значение."
    ],
    "expected_result": "При отправке по неподтвержденному номеру с временем ожидания 0 рассылка не начинается, UI показывает соответствующее предупреждение. При генерации тестового события с несоответствующим типом аргумента система возвращает ошибку (например, HTTP 409).",
    "attributes_covered": [
      "EVT-007",
      "EVT-003"
    ]
  }
]