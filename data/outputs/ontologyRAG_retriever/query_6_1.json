{
  "query": "условия вопросов в формах",
  "focus_summary": "Нужно протестировать настройку условий отправки вопросов в формах, включая логику проверки ответов на предыдущие вопросы, обработку пропущенных вопросов и условную отправку вопросов на основе значений ответов. Также важно проверить использование ответов на вопросы в jinja-шаблонах и выражениях, включая особые случаи для типа вопроса 'Файл' и обработку выходов из формы.",
  "core_passages": [
    {
      "section_id": "section_ch1344",
      "title": "Настройка условий отправки вопросов",
      "role": "core",
      "importance": "high",
      "summary": "Формы позволяют настраивать условия отправки вопросов клиенту. Условный вопрос отправляется только при выполнении определенного условия, например, если клиент поставил низкую оценку. Условный вопрос должен располагаться в списке после вопроса, ответ на который проверяется. Если вопрос, ответ на который проверяется, был пропущен клиентом, то срабатывают все условия 'Не равно' при любом значении сравнения."
    },
    {
      "section_id": "section_ch1393",
      "title": "Использование ответов на вопросы",
      "role": "core",
      "importance": "high",
      "summary": "Ответы на вопросы форм можно использовать аналогично макросам рассылки. В jinja-шаблонах указывается {{ form.<идентификатор_ответа> }}, в jinja-выражениях - slots.<идентификатор_ответа>. Ответы можно передавать во внешние системы при выходе из формы. При выходе по таймауту или по желанию клиента ответы будут только на отвеченные вопросы, на остальные - None. Для типа вопроса 'Файл' ответ - список URL; для передачи в некоторых случаях требуется преобразование списка в строку с помощью фильтров (например, |list|join(', ')) и проверка на пустоту."
    }
  ],
  "supporting_passages": [],
  "discarded_sections": [
    "section_ch0681",
    "section_ch0450",
    "section_ch0468",
    "section_ch0704",
    "section_ch0626"
  ],
  "domain_entities": [
    "Форма",
    "Вопрос",
    "Ответ на вопрос",
    "Идентификатор ответа",
    "Условие отправки",
    "Клиент",
    "Тип вопроса 'Файл'",
    "Jinja-шаблон",
    "Jinja-выражение",
    "Внешняя система"
  ],
  "hints_for_tests": [
    "Проверить, что условный вопрос отправляется только при выполнении заданного условия (например, равенство, неравенство значения ответа).",
    "Проверить, что условный вопрос не отправляется, если условие не выполняется.",
    "Проверить порядок вопросов: условный вопрос должен следовать после вопроса, ответ на который проверяется.",
    "Проверить обработку пропущенных вопросов: если вопрос, ответ на который проверяется, пропущен, должны срабатывать все условия 'Не равно'.",
    "Проверить использование ответов в jinja-шаблонах ({{ form.ид_ответа }}) и выражениях (slots.ид_ответа) в различных контекстах (рассылка, внешние вызовы).",
    "Проверить обработку выхода из формы по таймауту или желанию клиента: ответы должны быть только на отвеченные вопросы, на остальные - None.",
    "Проверить особую обработку типа вопроса 'Файл': ответ - список URL; проверить преобразование в строку с фильтрами и проверкой на пустоту.",
    "Проверить передачу ответов во внешние системы при любом выходе из формы."
  ]
}