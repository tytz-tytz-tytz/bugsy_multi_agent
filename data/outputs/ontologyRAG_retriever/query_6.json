{
  "query": "условия вопросов в формах",
  "focus_summary": "Нужно протестировать условия отправки вопросов в формах: логику проверки ответов на предыдущие вопросы для определения, отправлять ли следующий вопрос. Также важно проверить обработку ответов на вопросы (включая тип 'Файл') и их использование в шаблонах и выражениях.",
  "core_passages": [
    {
      "section_id": "section_ch1344",
      "title": "Настройка условий отправки вопросов",
      "role": "core",
      "importance": "high",
      "summary": "Формы позволяют настраивать условия отправки вопросов клиенту. Вопрос отправляется только при выполнении условия, например, если клиент дал низкую оценку. Условный вопрос должен располагаться после вопроса, ответ на который проверяется. Если ответ на проверяемый вопрос был пропущен, все условия 'Не равно' срабатывают при любом значении сравнения."
    },
    {
      "section_id": "section_ch1393",
      "title": "Использование ответов на вопросы",
      "role": "core",
      "importance": "high",
      "summary": "Ответы на вопросы форм доступны как макросы. В jinja-шаблонах используется {{ form.<идентификатор_ответа> }}, в jinja-выражениях — slots.<идентификатор_ответа>. При выходе из формы по таймауту или желанию клиента, ответы на неотвеченные вопросы равны None. Для вопросов типа 'Файл' ответ — список URL; для передачи в параметрах может потребоваться преобразование в строку с помощью фильтров (например, slots.answer5|list|join(', ') if slots.answer5 else None)."
    }
  ],
  "supporting_passages": [],
  "discarded_sections": [
    "section_ch0681",
    "section_ch0450",
    "section_ch0468",
    "section_ch0704",
    "section_ch0626"
  ],
  "domain_entities": [
    "Форма",
    "Вопрос",
    "Ответ на вопрос",
    "Идентификатор ответа",
    "Клиент",
    "Условие отправки",
    "Тип вопроса 'Файл'",
    "Jinja-шаблон",
    "Jinja-выражение",
    "Слот (slot)"
  ],
  "hints_for_tests": [
    "Проверить, что условный вопрос отправляется только при выполнении заданного условия на ответ предыдущего вопроса.",
    "Проверить обработку пропущенного ответа: условия 'Не равно' должны срабатывать при любом значении сравнения.",
    "Проверить доступность ответов на вопросы через form.<id> и slots.<id> в соответствующих контекстах.",
    "Проверить, что при выходе из формы по таймауту/желанию клиента, ответы на неотвеченные вопросы равны None.",
    "Проверить обработку ответов типа 'Файл': корректность списка URL и преобразование в строку с фильтрами при необходимости.",
    "Проверить, что идентификатор ответа задается в настройках вопроса."
  ]
}