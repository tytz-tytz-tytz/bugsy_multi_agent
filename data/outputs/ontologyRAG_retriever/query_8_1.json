{
  "query": "SMS провайдер",
  "focus_summary": "Тестирование функционала настройки и использования SMS-провайдеров в системе. Основные аспекты: создание провайдеров разных типов (SMSC, МТС, СМС услуги, SMS.ru), настройка параметров (логин, пароль, отправитель), особенности для конкретных провайдеров, добавление провайдера в рассылку и использование SMS-блока в конструкторе рассылок.",
  "core_passages": [
    {
      "section_id": "section_ch0887",
      "title": "Регистрация SMS-провайдера",
      "role": "core",
      "importance": "high",
      "summary": "Описание процесса создания SMS-провайдера в системе Maxbot. Перечислены поддерживаемые провайдеры: SMSC, МТС, СМС услуги, SMS.ru. Описаны обязательные шаги: переход в раздел SMS-провайдеры, нажатие кнопки создания, заполнение полей (Название, Описание, флаг использования по умолчанию, Тип, Логин, Пароль, Отправитель). Указано, что для провайдеров СМС услуги и SMS.ru есть особенности, описанные в приложениях."
    },
    {
      "section_id": "section_ch2142",
      "title": "Приложение В. Настройка SMS-провайдера «СМС услуги»",
      "role": "core",
      "importance": "high",
      "summary": "Особенности настройки провайдера «СМС услуги». В поле «Логин» указывается произвольная последовательность символов. В поле «Пароль» указывается токен из личного кабинета сервиса (раздел API - Рассылка сообщений). В поле «Отправитель» указывается отправитель, добавленный в разделе «Рассылка СМС» - «Имена отправителя». Для тестирования можно использовать сообщения «test» и «тест»."
    },
    {
      "section_id": "section_ch2162",
      "title": "Приложение Г. Настройка SMS-провайдера «SMS.ru»",
      "role": "core",
      "importance": "high",
      "summary": "Особенности настройки провайдера «SMS.ru». В поле «Отправитель» указывается зарегистрированный в SMS.ru отправитель или номер телефона аккаунта. В поле «Пароль» указывается «api_id», который можно получить в разделе «Программистам» - «Ваш api_id» личного кабинета SMS.ru."
    },
    {
      "section_id": "section_ch0922",
      "title": "Добавление SMS-провайдера в рассылку",
      "role": "core",
      "importance": "medium",
      "summary": "Процесс добавления созданного SMS-провайдера в рассылку. Необходимо открыть рассылку, перейти в раздел «Условия начала рассылки» и открыть подраздел «Расширенные настройки». Упомянута возможность принудительной отправки SMS, даже если клиент уже подключился к мессенджеру, через настройку полей messengers_order и failback_to_sms в файле аудитории."
    },
    {
      "section_id": "section_ch0931",
      "title": "Использование SMS-блока в конструкторе",
      "role": "core",
      "importance": "medium",
      "summary": "Описание добавления и использования SMS-блока в конструкторе рассылки после выбора SMS-провайдера. SMS-блок добавляется как новый тип блока. В рассылке может быть только один SMS-блок, но он может содержать несколько текстовых сообщений и ссылку на посадочную страницу. Клиенты получают либо сообщения в мессенджер, либо только SMS-блок, на основе флага failback_to_sms. Указано на возможное разделение одного сообщения на несколько SMS провайдером."
    }
  ],
  "supporting_passages": [
    {
      "section_id": "section_ch0948",
      "title": "Настройка посадочных страниц в SMS-блоке",
      "role": "supporting",
      "importance": "medium",
      "summary": "Описание настройки ссылки на посадочную страницу (лендинг) в SMS-блоке для автоматического подтверждения номера телефона и перевода аудитории в мессенджеры. Описан процесс выбора лендинга, настройки текста до и после ссылки, времени жизни ссылки. Указано, что диплинк в SMS заменяется на диплинк подтверждения номера. Даны рекомендации по экономии (использовать поля «Текст до/после» в одном сообщении со ссылкой)."
    },
    {
      "section_id": "section_ch0980",
      "title": "Добавление клиентов",
      "role": "supporting",
      "importance": "medium",
      "summary": "Правила добавления клиентов в SMS-рассылку по номеру телефона с флагом failback_to_sms. Описаны условия отправки SMS или сообщения в мессенджер в зависимости от статуса подтверждения номера клиентом на момент загрузки аудитории и запуска рассылки. Описаны настройки для принудительной отправки SMS (messengers_order пустым, failback_to_sms=true) и отправки SMS отписавшимся клиентам (unsubscribed_ttl=0). Упомянут тестовый запуск события."
    },
    {
      "section_id": "section_ch0970",
      "title": "Вызов внешней системы",
      "role": "supporting",
      "importance": "low",
      "summary": "Краткое описание вызова внешней системы в SMS-блоке. Указано, что при ошибке вызова сообщения в блоке не отправляются, и сообщение об ошибке клиенту не отправляется (в отличие от других блоков)."
    },
    {
      "section_id": "section_ch0973",
      "title": "Ограничение на использование профиля и идентификаторов диалога",
      "role": "supporting",
      "importance": "low",
      "summary": "Ограничения на использование системных переменных в SMS-блоке. Поскольку при отправке SMS клиента в системе еще не существует, обращение к профилю клиента невозможно, кроме переменной {{ profile.phone }}. Также невозможно обращение к идентификатору диалога (thread_id)."
    }
  ],
  "discarded_sections": [
    "section_ch0886"
  ],
  "domain_entities": [
    "SMS-провайдер",
    "SMS-блок",
    "Рассылка",
    "Клиент",
    "Аудитория",
    "Лендинг (посадочная страница)",
    "Мессенджер",
    "Отправитель",
    "Токен/api_id",
    "failback_to_sms",
    "messengers_order"
  ],
  "hints_for_tests": [
    "Проверить создание SMS-провайдера для каждого поддерживаемого типа (SMSC, МТС, СМС услуги, SMS.ru) с корректным заполнением всех полей.",
    "Проверить особенности настройки для провайдеров «СМС услуги» (произвольный логин, токен в пароль, отправитель из ЛК) и «SMS.ru» (отправитель или номер телефона, api_id в пароль).",
    "Проверить добавление SMS-провайдера в рассылку через расширенные настройки и выбор в интерфейсе.",
    "Проверить логику отправки SMS клиентам в зависимости от флага failback_to_sms и статуса подтверждения номера в мессенджерах.",
    "Проверить работу SMS-блока в конструкторе: добавление, ограничение на один блок, добавление сообщений и лендинга.",
    "Проверить настройку лендинга в SMS-блоке: выбор страницы, текст до/после, время жизни ссылки, замена диплинка.",
    "Проверить ограничения на использование переменных {{ profile.* }} (кроме phone) и {{ thread.thread_id }} в SMS-блоке.",
    "Проверить обработку ошибок при вызове внешней системы из SMS-блока (сообщения не отправляются, ошибка клиенту не выводится).",
    "Проверить принудительную отправку SMS через настройки messengers_order и failback_to_sms, а также для отписавшихся клиентов (unsubscribed_ttl=0)."
  ]
}