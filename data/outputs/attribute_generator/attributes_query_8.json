[
  {
    "id": "EVT-001",
    "name": "Обязательные поля при создании SMS-провайдера",
    "type": "functional",
    "priority": "P1",
    "description": "При создании SMS-провайдера в Maxbot обязательными для заполнения являются поля: Название, Описание, флаг 'Использовать по умолчанию', Тип провайдера, Логин, Пароль, Отправитель.",
    "positive_example": "Пользователь заполняет все обязательные поля и успешно создает провайдера типа SMSC.",
    "negative_example": "Пользователь оставляет поле 'Логин' пустым и получает ошибку валидации.",
    "source_section_ids": [
      "section_ch0887"
    ],
    "source_quotes": [
      "Указаны обязательные поля для создания: Название, Описание, флаг 'Использовать по умолчанию', Тип провайдера, Логин, Пароль, Отправитель."
    ]
  },
  {
    "id": "EVT-002",
    "name": "Особенности настройки провайдера 'СМС услуги'",
    "type": "functional",
    "priority": "P2",
    "description": "Для провайдера типа 'СМС услуги' в поле 'Логин' указывается произвольная последовательность символов, в поле 'Пароль' указывается токен из личного кабинета сервиса (раздел API - Рассылка сообщений), а в поле 'Отправитель' указывается имя, добавленное в разделе 'Рассылка СМС' - 'Имена отправителя'.",
    "positive_example": "Пользователь указывает в 'Логин' любое значение, в 'Пароль' вставляет токен из ЛК, в 'Отправитель' выбирает зарегистрированное имя отправителя.",
    "negative_example": "Пользователь пытается использовать в 'Пароль' не токен, а обычный пароль, и провайдер не проходит настройку.",
    "source_section_ids": [
      "section_ch2142"
    ],
    "source_quotes": [
      "В поле 'Логин' указывается произвольная последовательность символов. В поле 'Пароль' указывается токен из личного кабинета сервиса (раздел API - Рассылка сообщений). В поле 'Отправитель' указывается имя, добавленное в разделе 'Рассылка СМС' - 'Имена отправителя'."
    ]
  },
  {
    "id": "EVT-003",
    "name": "Особенности настройки провайдера 'SMS.ru'",
    "type": "functional",
    "priority": "P2",
    "description": "Для провайдера типа 'SMS.ru' в поле 'Отправитель' указывается зарегистрированный в SMS.ru отправитель или номер телефона аккаунта, а в поле 'Пароль' указывается 'api_id', полученный в разделе 'Программистам' - 'Ваш api_id' личного кабинета.",
    "positive_example": "Пользователь указывает в 'Отправитель' зарегистрированное имя 'MyCompany', в 'Пароль' вставляет api_id из ЛК SMS.ru.",
    "negative_example": "Пользователь указывает в 'Пароль' обычный пароль от аккаунта SMS.ru, и провайдер не настраивается.",
    "source_section_ids": [
      "section_ch2162"
    ],
    "source_quotes": [
      "В поле 'Отправитель' указывается зарегистрированный в SMS.ru отправитель или номер телефона аккаунта. В поле 'Пароль' указывается 'api_id', который можно получить в разделе 'Программистам' - 'Ваш api_id' личного кабинета."
    ]
  },
  {
    "id": "EVT-004",
    "name": "Условие отправки SMS по флагу failback_to_sms",
    "type": "business_rule",
    "priority": "P1",
    "description": "SMS отправляется клиенту только если клиент добавлен в аудиторию с флагом failback_to_sms = true. Если клиент уже подтвердил номер телефона в мессенджере, ему отправляется обычная рассылка в мессенджер, а не SMS.",
    "positive_example": "Клиент с подтвержденным номером в Telegram и failback_to_sms = false получает сообщение в Telegram, а не SMS.",
    "negative_example": "Клиент с failback_to_sms = true, но без подтвержденного номера в мессенджере, не получает SMS, хотя должен.",
    "source_section_ids": [
      "section_ch0980"
    ],
    "source_quotes": [
      "Для отправки SMS клиент должен быть добавлен в аудиторию с флагом failback_to_sms = true. Если клиент уже подтвердил номер телефона в мессенджере, ему отправляется обычная рассылка, а не SMS."
    ]
  },
  {
    "id": "EVT-005",
    "name": "Принудительная отправка SMS",
    "type": "business_rule",
    "priority": "P2",
    "description": "Для принудительной отправки SMS клиенту, даже если он подключен к мессенджеру, необходимо в настройках аудитории задать пустое поле messengers_order и выставить failback_to_sms = true.",
    "positive_example": "Клиент с подтвержденным номером в WhatsApp, но с пустым messengers_order и failback_to_sms = true получает SMS, а не сообщение в WhatsApp.",
    "negative_example": "Клиент с подтвержденным номером в Viber, messengers_order = ['viber'] и failback_to_sms = true получает сообщение в Viber, а не SMS.",
    "source_section_ids": [
      "section_ch0980",
      "section_ch0922"
    ],
    "source_quotes": [
      "Для принудительной отправки SMS можно задать пустое поле messengers_order и выставить failback_to_sms = true.",
      "Упомянута возможность принудительной отправки SMS (даже если клиент подключен к мессенджеру) через настройку файла аудитории: messengers_order пустое и failback_to_sms = True."
    ]
  },
  {
    "id": "EVT-006",
    "name": "Добавление SMS-провайдера в рассылку",
    "type": "functional",
    "priority": "P2",
    "description": "После создания SMS-провайдер может быть добавлен в любую рассылку через раздел 'Условия начала рассылки' - 'Расширенные настройки', что позволяет добавить SMS-блок.",
    "positive_example": "Пользователь в настройках рассылки выбирает созданного провайдера и добавляет SMS-блок в конструктор.",
    "negative_example": "Пользователь пытается добавить SMS-блок без предварительного выбора провайдера в расширенных настройках, и блок недоступен.",
    "source_section_ids": [
      "section_ch0922"
    ],
    "source_quotes": [
      "После создания SMS-провайдер может быть добавлен в любую рассылку через раздел 'Условия начала рассылки' - 'Расширенные настройки'. Это позволяет добавить SMS-блок."
    ]
  },
  {
    "id": "EVT-007",
    "name": "Ограничение на количество SMS-блоков в рассылке",
    "type": "business_rule",
    "priority": "P2",
    "description": "В одной рассылке может быть только один SMS-блок, но этот блок может содержать несколько текстовых сообщений и ссылку на посадочную страницу.",
    "positive_example": "Пользователь добавляет один SMS-блок с двумя текстовыми сообщениями и ссылкой на лендинг.",
    "negative_example": "Пользователь пытается добавить второй SMS-блок в ту же рассылку и получает ошибку или блок не добавляется.",
    "source_section_ids": [
      "section_ch0931"
    ],
    "source_quotes": [
      "В рассылке может быть только один SMS-блок, но он может содержать несколько текстовых сообщений и ссылку на посадочную страницу."
    ]
  },
  {
    "id": "EVT-008",
    "name": "Обработка ошибок внешней системы в SMS-блоке",
    "type": "negative",
    "priority": "P3",
    "description": "Если в SMS-блоке вызов внешней системы завершается ошибкой, сообщения в SMS-блоке не отправляются клиенту, при этом клиенту не отправляется сообщение об ошибке.",
    "positive_example": "При ошибке подключения к внешнему API SMS-сообщения не отправляются, но клиент не получает уведомление об ошибке.",
    "negative_example": "При ошибке внешней системы клиент получает SMS с текстом 'Ошибка' или аналогичным.",
    "source_section_ids": [
      "section_ch0970"
    ],
    "source_quotes": [
      "Если вызов завершится ошибкой, сообщения в SMS-блоке не будут отправлены. При этом клиенту не отправляется сообщение об ошибке (в отличие от других блоков)."
    ]
  },
  {
    "id": "EVT-009",
    "name": "Ограничение на переменные профиля в SMS-блоке",
    "type": "business_rule",
    "priority": "P3",
    "description": "В SMS-блоке невозможно использовать переменные профиля клиента, кроме одной — {{ profile.phone }}, так как при отправке SMS клиент в системе может еще не существовать.",
    "positive_example": "В тексте SMS-сообщения используется переменная {{ profile.phone }}, которая подставляется корректно.",
    "negative_example": "Попытка использовать переменную {{ profile.name }} в SMS-блоке приводит к ошибке или пустой подстановке.",
    "source_section_ids": [
      "section_ch0973"
    ],
    "source_quotes": [
      "Поскольку при отправке SMS клиента в системе еще не существует, обращение к профилю невозможно, кроме одной переменной — {{ profile.phone }}."
    ]
  },
  {
    "id": "EVT-010",
    "name": "Замена диплинка в SMS-блоке при использовании лендинга",
    "type": "functional",
    "priority": "P2",
    "description": "При настройке ссылки на посадочную страницу (лендинг) в SMS-блоке, при переходе из SMS диплинк заменяется на диплинк подтверждения для автоматического подтверждения номера телефона в мессенджере.",
    "positive_example": "Клиент получает SMS со ссылкой, при переходе по которой открывается лендинг с диплинком подтверждения для привязки мессенджера.",
    "negative_example": "Ссылка в SMS ведет напрямую на лендинг без замены диплинка, и подтверждение номера не происходит.",
    "source_section_ids": [
      "section_ch0948"
    ],
    "source_quotes": [
      "При переходе из SMS диплинк заменяется на диплинк подтверждения."
    ]
  },
  {
    "id": "EVT-011",
    "name": "Настройка времени жизни ссылки в SMS-блоке",
    "type": "ui",
    "priority": "P3",
    "description": "При настройке ссылки на лендинг в SMS-блоке можно задать время жизни ссылки, после которого ссылка становится недействительной.",
    "positive_example": "Пользователь устанавливает время жизни ссылки 24 часа, и через 25 часов ссылка перестает работать.",
    "negative_example": "Ссылка остается активной неограниченное время, даже если время жизни было задано.",
    "source_section_ids": [
      "section_ch0948"
    ],
    "source_quotes": [
      "Описаны поля настройки: выбор лендинга, 'Текст до', 'Текст после', время жизни ссылки."
    ]
  },
  {
    "id": "EVT-012",
    "name": "Разделение сообщения провайдером на несколько SMS",
    "type": "business_rule",
    "priority": "P3",
    "description": "Одно сообщение, добавленное в конструкторе SMS-блока, может быть разделено SMS-провайдером на несколько SMS и тарифицироваться соответственно количеству частей.",
    "positive_example": "Длинное сообщение из 500 символов отправляется как две SMS, и тарификация происходит за два сообщения.",
    "negative_example": "Длинное сообщение отправляется как одна SMS, но обрезается провайдером, теряя часть текста.",
    "source_section_ids": [
      "section_ch0931"
    ],
    "source_quotes": [
      "Указано, что одно сообщение в конструкторе может быть разделено провайдером на несколько и тарифицироваться соответственно."
    ]
  }
]