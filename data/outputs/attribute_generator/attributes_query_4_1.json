[
  {
    "id": "AUD-001",
    "name": "Фиксированная аудитория неизменна после запуска",
    "type": "business_rule",
    "priority": "P1",
    "description": "Фиксированная аудитория рассылки, заданная до запуска, не может быть изменена после старта рассылки. Для отправки другой аудитории требуется клонирование рассылки.",
    "positive_example": "После запуска рассылки с фиксированной аудиторией из 100 клиентов, попытка редактирования списка аудитории в интерфейсе заблокирована или недоступна.",
    "negative_example": "После запуска рассылки пользователь может удалить или добавить клиентов в фиксированную аудиторию через UI.",
    "source_section_ids": [
      "section_ch0681"
    ],
    "source_quotes": [
      "Фиксированная аудитория задается до запуска и не может быть изменена после старта, требуется клонирование рассылки для другой аудитории."
    ]
  },
  {
    "id": "AUD-002",
    "name": "Динамическая аудитория не имеет ограничений",
    "type": "business_rule",
    "priority": "P2",
    "description": "Динамическая аудитория формируется в ходе рассылки по событиям, тегам или ключевым словам и не может быть ограничена по размеру или составу заранее.",
    "positive_example": "Рассылка с динамической аудиторией по событию 'добавление в корзину' отправляется всем клиентам, которые выполнили это событие после старта рассылки.",
    "negative_example": "Система требует указать максимальное количество клиентов для динамической аудитории при создании рассылки.",
    "source_section_ids": [
      "section_ch0681"
    ],
    "source_quotes": [
      "Динамическая аудитория формируется в ходе рассылки по событиям, тегам или ключевым словам и не может быть ограничена."
    ]
  },
  {
    "id": "AUD-003",
    "name": "Один запуск для фиксированной аудитории",
    "type": "business_rule",
    "priority": "P2",
    "description": "Для рассылки с фиксированной аудиторией возможен только один запуск, после чего рассылка переходит в пассивный режим и не может быть перезапущена с той же аудиторией.",
    "positive_example": "После завершения рассылки с фиксированной аудиторией кнопка 'Запустить' становится неактивной или скрытой.",
    "negative_example": "Рассылка с фиксированной аудиторией может быть запущена повторно без клонирования.",
    "source_section_ids": [
      "section_ch0681"
    ],
    "source_quotes": [
      "Для фиксированной аудитории возможен только один запуск, после чего рассылка переходит в пассивный режим."
    ]
  },
  {
    "id": "EVT-001",
    "name": "Системные события неизменяемы",
    "type": "business_rule",
    "priority": "P1",
    "description": "Системные события (например, добавление клиента, подтверждение номера) нельзя изменить или удалить через интерфейс, они срабатывают для всех клиентов.",
    "positive_example": "В списке событий системные события отображаются без кнопок редактирования или удаления.",
    "negative_example": "Пользователь может изменить имя или идентификатор системного события через UI.",
    "source_section_ids": [
      "section_ch1056"
    ],
    "source_quotes": [
      "Системные события нельзя изменить или удалить, они срабатывают для всех клиентов, что требует осторожности при тестировании."
    ]
  },
  {
    "id": "EVT-002",
    "name": "Пользовательские события создаются с аргументами",
    "type": "functional",
    "priority": "P2",
    "description": "Пользовательские события создаются через интерфейс или API и должны иметь идентификатор, имя и опциональные аргументы для передачи дополнительной информации, которые можно использовать в рассылках как макросы.",
    "positive_example": "При создании события 'покупка' через UI можно добавить аргумент 'сумма' типа число, который затем используется в шаблоне рассылки.",
    "negative_example": "Создание пользовательского события без указания идентификатора или имени разрешено системой.",
    "source_section_ids": [
      "section_ch1056"
    ],
    "source_quotes": [
      "Пользовательские события создаются через интерфейс или API, имеют идентификатор, имя и аргументы для передачи дополнительной информации. Аргументы можно использовать в рассылках аналогично макросам."
    ]
  },
  {
    "id": "EVT-003",
    "name": "Проверка типов аргументов событий",
    "type": "functional",
    "priority": "P1",
    "description": "При генерации события для тестирования через интерфейс консоли маркетолога система проверяет соответствие типов переданных аргументов ожидаемым типам, определенным при создании события.",
    "positive_example": "При генерации события с аргументом 'цена' типа 'число' и значением 100, система принимает запрос и создает launch_result_id.",
    "negative_example": "При генерации события с аргументом 'цена' типа 'число' и строковым значением 'сто', система возвращает ошибку HTTP 409.",
    "source_section_ids": [
      "section_ch1085"
    ],
    "source_quotes": [
      "Система проверяет соответствие типов аргументов событий. Приведен пример ошибки при некорректном типе аргумента (HTTP 409)."
    ]
  },
  {
    "id": "EVT-004",
    "name": "Редактирование событий, используемых в рассылках",
    "type": "business_rule",
    "priority": "P2",
    "description": "Если пользовательское событие используется в рассылке, его удаление запрещено, редактирование названия и идентификатора разрешено, а редактирование аргументов ограничено их использованием в рассылках.",
    "positive_example": "При попытке удалить событие, на которое ссылается активная рассылка, UI показывает сообщение об ошибке 'Событие используется в рассылке'.",
    "negative_example": "Пользователь может удалить событие, которое используется в запущенной рассылке.",
    "source_section_ids": [
      "section_ch1080"
    ],
    "source_quotes": [
      "Если событие используется в рассылке, удаление запрещено, редактирование названия и идентификатора разрешено. Редактирование аргументов ограничено их использованием в рассылках."
    ]
  },
  {
    "id": "EVT-005",
    "name": "Запрет редактирования запущенных событий",
    "type": "business_rule",
    "priority": "P2",
    "description": "Если рассылка, использующая событие, уже запущена, редактирование всех полей этого события (включая название, идентификатор и аргументы) запрещено.",
    "positive_example": "При открытии формы редактирования события, связанного с запущенной рассылкой, все поля заблокированы или форма недоступна.",
    "negative_example": "Пользователь может изменить аргументы события, пока рассылка, которая его использует, выполняется.",
    "source_section_ids": [
      "section_ch1080"
    ],
    "source_quotes": [
      "Если рассылка запущена, редактирование всех полей события запрещено."
    ]
  },
  {
    "id": "EVT-006",
    "name": "Отложенные события до подтверждения номера",
    "type": "functional",
    "priority": "P3",
    "description": "Рассылка может быть настроена на старт после подтверждения номера телефона клиентом в течение заданного времени (ttl). Если клиент с номером уже существует и подтвержден, рассылка начинается сразу.",
    "positive_example": "При генерации события с ttl=3600 для клиента с неподтвержденным номером, рассылка ожидает подтверждения в течение часа.",
    "negative_example": "Отложенное событие игнорирует статус подтверждения номера и начинает рассылку немедленно для всех клиентов.",
    "source_section_ids": [
      "section_ch1103"
    ],
    "source_quotes": [
      "Описание отложенных событий, когда рассылка стартует после подтверждения номера телефона клиентом в течение заданного времени (ttl). Если клиент с номером уже существует, рассылка начинается сразу."
    ]
  },
  {
    "id": "EVT-007",
    "name": "Отправка по номеру телефона без подтверждения",
    "type": "functional",
    "priority": "P3",
    "description": "При отправке рассылки по номеру телефона с временем ожидания 0, если клиент не подтвердил номер, рассылка не начинается. Для SMS-рассылок требуется установленный флажок и SMS-блок.",
    "positive_example": "При отправке рассылки по номеру +79990001122, который не подтвержден в системе, рассылка не запускается и UI показывает соответствующее предупреждение.",
    "negative_example": "Рассылка начинается для неподтвержденного номера телефона при отправке с временем ожидания 0.",
    "source_section_ids": [
      "section_ch1130"
    ],
    "source_quotes": [
      "Если клиент подтвердил номер, используется первый мессенджер по приоритету. Если номер не подтвержден, рассылка не начинается. Для SMS-рассылок требуется установленный флажок и SMS-блок."
    ]
  },
  {
    "id": "UI-001",
    "name": "Генерация тестового события с переходом в отладку",
    "type": "ui",
    "priority": "P2",
    "description": "Через интерфейс консоли маркетолога должна быть возможность сгенерировать тестовое событие и автоматически перейти к разделу отладки рассылки по полученным идентификаторам запуска (launch_result_id).",
    "positive_example": "После нажатия 'Сгенерировать событие' для тестирования, система открывает вкладку 'Отладка' с фильтром по launch_result_id.",
    "negative_example": "После генерации события пользователь должен вручную искать launch_result_id и открывать раздел отладки.",
    "source_section_ids": [
      "section_ch1085",
      "section_ch1620"
    ],
    "source_quotes": [
      "Позволяет сгенерировать событие и перейти к отладке рассылки по полученным идентификаторам запуска.",
      "Раздел помогает понять, почему клиенты не получили рассылку, содержит вкладки 'События' и 'Рассылки'."
    ]
  },
  {
    "id": "DAT-001",
    "name": "Формат JSON для фиксированной аудитории",
    "type": "functional",
    "priority": "P1",
    "description": "Фиксированная аудитория может быть загружена через JSON-файл, содержащий поля для клиентов (id, phone, messengers_order, timezone, failback_to_sms, customer_data) и макросов (name, type). Обязательны комбинации: id, либо phone и messengers_order, либо только phone для принудительной отправки SMS. При наличии всех полей приоритет отдается id.",
    "positive_example": "Загрузка JSON-файла с полями 'phone' и 'messengers_order' успешно создает аудиторию из 50 клиентов.",
    "negative_example": "Загрузка JSON-файла без обязательных полей 'phone' или 'id' приводит к ошибке валидации.",
    "source_section_ids": [
      "section_ch0704"
    ],
    "source_quotes": [
      "Формат JSON-файла для загрузки фиксированной аудитории рассылки. Описывает поля для клиентов и макросов. Указывает обязательные комбинации полей: id, либо phone и messengers_order, либо только phone для принудительной отправки SMS. Приоритет при наличии всех полей отдается id."
    ]
  },
  {
    "id": "NEG-001",
    "name": "Невозможность запуска рассылки без условий начала",
    "type": "negative",
    "priority": "P2",
    "description": "Рассылка не может быть запущена, если не задано условие начала (сразу, по времени, по событию).",
    "positive_example": "При создании рассылки без выбора условия начала кнопка 'Сохранить и запустить' неактивна.",
    "negative_example": "Пользователь может запустить рассылку, не указав ни одного условия начала.",
    "source_section_ids": [
      "section_ch0681"
    ],
    "source_quotes": [
      "Определяет условия начала рассылки и их влияние на событие Start."
    ]
  }
]