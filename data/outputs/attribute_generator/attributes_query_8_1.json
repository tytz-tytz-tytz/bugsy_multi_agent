[
  {
    "id": "EVT-001",
    "name": "Создание SMS-провайдера с заполнением обязательных полей",
    "type": "functional",
    "priority": "P1",
    "description": "В системе должна быть возможность создать SMS-провайдера с заполнением всех обязательных полей: Название, Описание, флаг использования по умолчанию, Тип, Логин, Пароль, Отправитель.",
    "positive_example": "Пользователь переходит в раздел SMS-провайдеры, нажимает кнопку создания, заполняет все поля корректными данными и успешно создает провайдера.",
    "negative_example": "Пользователь оставляет поле 'Логин' пустым, система не позволяет сохранить провайдера и показывает ошибку валидации.",
    "source_section_ids": [
      "section_ch0887"
    ],
    "source_quotes": [
      "Описаны обязательные шаги: переход в раздел SMS-провайдеры, нажатие кнопки создания, заполнение полей (Название, Описание, флаг использования по умолчанию, Тип, Логин, Пароль, Отправитель)."
    ]
  },
  {
    "id": "EVT-002",
    "name": "Поддержка типов SMS-провайдеров",
    "type": "business_rule",
    "priority": "P1",
    "description": "Система должна поддерживать создание SMS-провайдеров следующих типов: SMSC, МТС, СМС услуги, SMS.ru.",
    "positive_example": "В выпадающем списке 'Тип' при создании провайдера отображаются варианты: SMSC, МТС, СМС услуги, SMS.ru.",
    "negative_example": "В списке отсутствует тип 'SMS.ru', пользователь не может его выбрать.",
    "source_section_ids": [
      "section_ch0887"
    ],
    "source_quotes": [
      "Перечислены поддерживаемые провайдеры: SMSC, МТС, СМС услуги, SMS.ru."
    ]
  },
  {
    "id": "EVT-003",
    "name": "Особенности настройки провайдера 'СМС услуги'",
    "type": "functional",
    "priority": "P2",
    "description": "При создании провайдера типа 'СМС услуги' в поле 'Логин' можно указать произвольную последовательность символов, в поле 'Пароль' — токен из личного кабинета сервиса, в поле 'Отправитель' — отправителя, добавленного в разделе 'Рассылка СМС' - 'Имена отправителя'.",
    "positive_example": "Пользователь выбирает тип 'СМС услуги', вводит 'test123' в логин, валидный токен в пароль, выбирает существующего отправителя из списка.",
    "negative_example": "Пользователь вводит в поле 'Отправитель' несуществующее имя, система показывает ошибку.",
    "source_section_ids": [
      "section_ch2142"
    ],
    "source_quotes": [
      "В поле «Логин» указывается произвольная последовательность символов. В поле «Пароль» указывается токен из личного кабинета сервиса (раздел API - Рассылка сообщений). В поле «Отправитель» указывается отправитель, добавленный в разделе «Рассылка СМС» - «Имена отправителя»."
    ]
  },
  {
    "id": "EVT-004",
    "name": "Особенности настройки провайдера 'SMS.ru'",
    "type": "functional",
    "priority": "P2",
    "description": "При создании провайдера типа 'SMS.ru' в поле 'Отправитель' указывается зарегистрированный в SMS.ru отправитель или номер телефона аккаунта, в поле 'Пароль' указывается 'api_id' из личного кабинета SMS.ru.",
    "positive_example": "Пользователь выбирает тип 'SMS.ru', вводит зарегистрированного отправителя 'MyBrand' и корректный api_id в пароль.",
    "negative_example": "Пользователь вводит некорректный api_id, система не принимает настройки.",
    "source_section_ids": [
      "section_ch2162"
    ],
    "source_quotes": [
      "В поле «Отправитель» указывается зарегистрированный в SMS.ru отправитель или номер телефона аккаунта. В поле «Пароль» указывается «api_id», который можно получить в разделе «Программистам» - «Ваш api_id» личного кабинета SMS.ru."
    ]
  },
  {
    "id": "EVT-005",
    "name": "Добавление SMS-провайдера в рассылку",
    "type": "ui",
    "priority": "P1",
    "description": "Созданный SMS-провайдер должен быть доступен для выбора в расширенных настройках рассылки.",
    "positive_example": "Пользователь открывает рассылку, переходит в 'Условия начала рассылки' -> 'Расширенные настройки', видит выпадающий список с созданными провайдерами и выбирает нужный.",
    "negative_example": "Созданный провайдер не отображается в списке для выбора в рассылке.",
    "source_section_ids": [
      "section_ch0922"
    ],
    "source_quotes": [
      "Процесс добавления созданного SMS-провайдера в рассылку. Необходимо открыть рассылку, перейти в раздел «Условия начала рассылки» и открыть подраздел «Расширенные настройки»."
    ]
  },
  {
    "id": "EVT-006",
    "name": "Один SMS-блок в рассылке",
    "type": "business_rule",
    "priority": "P2",
    "description": "В одной рассылке может быть добавлен только один SMS-блок.",
    "positive_example": "Пользователь добавляет SMS-блок в конструктор рассылки, кнопка добавления второго SMS-блока становится неактивной или скрыта.",
    "negative_example": "Пользователь может добавить два SMS-блока в одну рассылку.",
    "source_section_ids": [
      "section_ch0931"
    ],
    "source_quotes": [
      "В рассылке может быть только один SMS-блок."
    ]
  },
  {
    "id": "EVT-007",
    "name": "Содержимое SMS-блока",
    "type": "functional",
    "priority": "P2",
    "description": "SMS-блок может содержать несколько текстовых сообщений и ссылку на посадочную страницу.",
    "positive_example": "Пользователь добавляет SMS-блок, вводит два текстовых сообщения и настраивает ссылку на лендинг.",
    "negative_example": "SMS-блок позволяет добавить только одно текстовое сообщение.",
    "source_section_ids": [
      "section_ch0931"
    ],
    "source_quotes": [
      "SMS-блок добавляется как новый тип блока. ... он может содержать несколько текстовых сообщений и ссылку на посадочную страницу."
    ]
  },
  {
    "id": "EVT-008",
    "name": "Настройка лендинга в SMS-блоке",
    "type": "ui",
    "priority": "P2",
    "description": "В SMS-блоке можно настроить ссылку на посадочную страницу с указанием текста до и после ссылки, времени жизни ссылки.",
    "positive_example": "Пользователь выбирает лендинг из списка, вводит 'Перейдите по ссылке:' в 'Текст до' и 'для подтверждения' в 'Текст после', устанавливает время жизни 24 часа.",
    "negative_example": "Поле для выбора лендинга отсутствует в интерфейсе SMS-блока.",
    "source_section_ids": [
      "section_ch0948"
    ],
    "source_quotes": [
      "Описан процесс выбора лендинга, настройки текста до и после ссылки, времени жизни ссылки."
    ]
  },
  {
    "id": "EVT-009",
    "name": "Замена диплинка в SMS на диплинк подтверждения номера",
    "type": "functional",
    "priority": "P3",
    "description": "При настройке ссылки на лендинг в SMS-блоке, диплинк в SMS заменяется на диплинк подтверждения номера телефона.",
    "positive_example": "В отправленном SMS сообщении ссылка ведет на страницу подтверждения номера, а не на исходный лендинг.",
    "negative_example": "В SMS отправляется оригинальная ссылка на лендинг без преобразования в диплинк подтверждения.",
    "source_section_ids": [
      "section_ch0948"
    ],
    "source_quotes": [
      "Указано, что диплинк в SMS заменяется на диплинк подтверждения номера."
    ]
  },
  {
    "id": "EVT-010",
    "name": "Логика отправки SMS в зависимости от failback_to_sms",
    "type": "business_rule",
    "priority": "P1",
    "description": "Если флаг failback_to_sms установлен в true, клиенты получают SMS, даже если они подключены к мессенджеру. Если false, клиенты получают сообщения в мессенджер, а SMS-блок игнорируется.",
    "positive_example": "При failback_to_sms=true клиент с подтвержденным номером в мессенджере получает SMS. При false — получает сообщение в мессенджер.",
    "negative_example": "При failback_to_sms=true клиент не получает SMS, хотя должен.",
    "source_section_ids": [
      "section_ch0931",
      "section_ch0980"
    ],
    "source_quotes": [
      "Клиенты получают либо сообщения в мессенджер, либо только SMS-блок, на основе флага failback_to_sms.",
      "Описаны условия отправки SMS или сообщения в мессенджер в зависимости от статуса подтверждения номера клиентом на момент загрузки аудитории и запуска рассылки."
    ]
  },
  {
    "id": "EVT-011",
    "name": "Принудительная отправка SMS через настройки аудитории",
    "type": "functional",
    "priority": "P2",
    "description": "Принудительная отправка SMS, даже если клиент уже подключился к мессенджеру, возможна через настройку полей messengers_order (пустым) и failback_to_sms (true) в файле аудитории.",
    "positive_example": "В файле аудитории установлены messengers_order: [] и failback_to_sms: true, все клиенты получают SMS независимо от статуса в мессенджерах.",
    "negative_example": "При messengers_order: ['whatsapp'] и failback_to_sms: true клиенты не получают SMS, если доступен WhatsApp.",
    "source_section_ids": [
      "section_ch0922",
      "section_ch0980"
    ],
    "source_quotes": [
      "Упомянута возможность принудительной отправки SMS, даже если клиент уже подключился к мессенджеру, через настройку полей messengers_order и failback_to_sms в файле аудитории.",
      "Описаны настройки для принудительной отправки SMS (messengers_order пустым, failback_to_sms=true)."
    ]
  },
  {
    "id": "EVT-012",
    "name": "Отправка SMS отписавшимся клиентам",
    "type": "business_rule",
    "priority": "P3",
    "description": "Отправка SMS клиентам, отписавшимся от рассылок в мессенджерах, возможна при установке unsubscribed_ttl=0 в настройках аудитории.",
    "positive_example": "Клиент отписался от WhatsApp-рассылок, но при unsubscribed_ttl=0 получает SMS из данной рассылки.",
    "negative_example": "При unsubscribed_ttl=3600 отписавшийся клиент не получает SMS.",
    "source_section_ids": [
      "section_ch0980"
    ],
    "source_quotes": [
      "Упомянут тестовый запуск события.",
      "Описаны настройки для ... отправки SMS отписавшимся клиентам (unsubscribed_ttl=0)."
    ]
  },
  {
    "id": "EVT-013",
    "name": "Ограничение переменных в SMS-блоке",
    "type": "negative",
    "priority": "P2",
    "description": "В SMS-блоке нельзя использовать системные переменные профиля клиента, кроме {{ profile.phone }}, и нельзя использовать переменную {{ thread.thread_id }}.",
    "positive_example": "Пользователь может вставить {{ profile.phone }} в текст SMS. Переменные {{ profile.name }} или {{ thread.thread_id }} недоступны для выбора или вызывают ошибку.",
    "negative_example": "Система позволяет вставить {{ profile.name }} в SMS-блок и отправляет сообщение с пустым значением.",
    "source_section_ids": [
      "section_ch0973"
    ],
    "source_quotes": [
      "Поскольку при отправке SMS клиента в системе еще не существует, обращение к профилю клиента невозможно, кроме переменной {{ profile.phone }}. Также невозможно обращение к идентификатору диалога (thread_id)."
    ]
  },
  {
    "id": "EVT-014",
    "name": "Обработка ошибок вызова внешней системы в SMS-блоке",
    "type": "negative",
    "priority": "P3",
    "description": "При ошибке вызова внешней системы в SMS-блоке, сообщения из этого блока не отправляются клиенту, и сообщение об ошибке клиенту не выводится.",
    "positive_example": "Внешний сервис возвращает ошибку 500, SMS-блок не отправляется, но рассылка продолжается с другими блоками, клиент не видит ошибки.",
    "negative_example": "При ошибке внешнего вызова клиент получает SMS с текстом 'Ошибка системы'.",
    "source_section_ids": [
      "section_ch0970"
    ],
    "source_quotes": [
      "Указано, что при ошибке вызова сообщения в блоке не отправляются, и сообщение об ошибке клиенту не отправляется (в отличие от других блоков)."
    ]
  },
  {
    "id": "EVT-015",
    "name": "Разделение длинного сообщения на несколько SMS",
    "type": "functional",
    "priority": "P3",
    "description": "Длинное текстовое сообщение в SMS-блоке может быть автоматически разделено провайдером на несколько SMS.",
    "positive_example": "Пользователь вводит текст длиной 500 символов, провайдер отправляет его как два SMS-сообщения.",
    "negative_example": "Длинное сообщение обрезается или не отправляется вовсе.",
    "source_section_ids": [
      "section_ch0931"
    ],
    "source_quotes": [
      "Указано на возможное разделение одного сообщения на несколько SMS провайдером."
    ]
  }
]